!function(){"use strict";function a(a,c,d){function e(b){var d=f(a,c);if(!d||d.to.line-d.from.line<g)return null;for(var e=a.findMarksAt(d.from),h=0;h<e.length;++h)if(e[h].__isFold){if(!b)return null;d.cleared=!0,e[h].clear()}return d}var f=d&&(d.call?d:d.rangeFinder);if(f||(f=a.getHelper(c,"fold")),f){"number"==typeof c&&(c=CodeMirror.Pos(c,0));var g=d&&d.minFoldSize||0,h=e(!0);if(d&&d.scanUp)for(;!h&&c.line>a.firstLine();)c=CodeMirror.Pos(c.line-1,0),h=e(!1);if(h&&!h.cleared){var i=b(d);CodeMirror.on(i,"mousedown",function(){j.clear()});var j=a.markText(h.from,h.to,{replacedWith:i,clearOnEnter:!0,__isFold:!0});j.on("clear",function(b,c){CodeMirror.signal(a,"unfold",a,b,c)}),CodeMirror.signal(a,"fold",a,h.from,h.to)}}}function b(a){var b=a&&a.widget||"â†”";if("string"==typeof b){var c=document.createTextNode(b);b=document.createElement("span"),b.appendChild(c),b.className="CodeMirror-foldmarker"}return b}CodeMirror.newFoldFunction=function(b,c){return function(d,e){a(d,e,{rangeFinder:b,widget:c})}},CodeMirror.defineExtension("foldCode",function(b,c){a(this,b,c)}),CodeMirror.registerHelper("fold","combine",function(){var a=Array.prototype.slice.call(arguments,0);return function(b,c){for(var d=0;d<a.length;++d){var e=a[d](b,c);if(e)return e}}})}(),function(){"use strict";function a(a){this.options=a,this.from=this.to=0}function b(a){return a===!0&&(a={}),null==a.gutter&&(a.gutter="CodeMirror-foldgutter"),null==a.indicatorOpen&&(a.indicatorOpen="CodeMirror-foldgutter-open"),null==a.indicatorFolded&&(a.indicatorFolded="CodeMirror-foldgutter-folded"),a}function c(a,b){for(var c=a.findMarksAt(k(b)),d=0;d<c.length;++d)if(c[d].__isFold&&c[d].find().from.line==b)return!0}function d(a){if("string"==typeof a){var b=document.createElement("div");return b.className=a,b}return a.cloneNode(!0)}function e(a,b,e){var f=a.state.foldGutter.options,g=b;a.eachLine(b,e,function(b){var e=null;if(c(a,g))e=d(f.indicatorFolded);else{var h=k(g,0),i=f.rangeFinder||a.getHelper(h,"fold"),j=i&&i(a,h);j&&j.from.line+1<j.to.line&&(e=d(f.indicatorOpen))}a.setGutterMarker(b,f.gutter,e),++g})}function f(a){var b=a.getViewport(),c=a.state.foldGutter;c&&(a.operation(function(){e(a,b.from,b.to)}),c.from=b.from,c.to=b.to)}function g(a,b,c){var d=a.state.foldGutter.options;c==d.gutter&&a.foldCode(k(b,0),d.rangeFinder)}function h(a){var b=a.state.foldGutter,c=a.state.foldGutter.options;b.from=b.to=0,clearTimeout(b.changeUpdate),b.changeUpdate=setTimeout(function(){f(a)},c.foldOnChangeTimeSpan||600)}function i(a){var b=a.state.foldGutter,c=a.state.foldGutter.options;clearTimeout(b.changeUpdate),b.changeUpdate=setTimeout(function(){var c=a.getViewport();b.from==b.to||c.from-b.to>20||b.from-c.to>20?f(a):a.operation(function(){c.from<b.from&&(e(a,c.from,b.from),b.from=c.from),c.to>b.to&&(e(a,b.to,c.to),b.to=c.to)})},c.updateViewportTimeSpan)}function j(a,b){var c=a.state.foldGutter,d=b.line;d>=c.from&&d<c.to&&e(a,d,d+1)}CodeMirror.defineOption("foldGutter",!1,function(c,d,e){e&&e!=CodeMirror.Init&&(c.clearGutter(c.state.foldGutter.options.gutter),c.state.foldGutter=null,c.off("gutterClick",g),c.off("change",h),c.off("viewportChange",i),c.off("fold",j),c.off("unfold",j),c.off("swapDoc",f)),d&&(c.state.foldGutter=new a(b(d)),f(c),c.on("gutterClick",g),c.on("change",h),c.on("viewportChange",i),c.on("fold",j),c.on("unfold",j),c.on("swapDoc",f))});var k=CodeMirror.Pos}(),CodeMirror.overlayMode=CodeMirror.overlayParser=function(a,b,c){return{startState:function(){return{base:CodeMirror.startState(a),overlay:CodeMirror.startState(b),basePos:0,baseCur:null,overlayPos:0,overlayCur:null}},copyState:function(c){return{base:CodeMirror.copyState(a,c.base),overlay:CodeMirror.copyState(b,c.overlay),basePos:c.basePos,baseCur:null,overlayPos:c.overlayPos,overlayCur:null}},token:function(d,e){return d.start==e.basePos&&(e.baseCur=a.token(d,e.base),e.basePos=d.pos),d.start==e.overlayPos&&(d.pos=d.start,e.overlayCur=b.token(d,e.overlay),e.overlayPos=d.pos),d.pos=Math.min(e.basePos,e.overlayPos),d.eol()&&(e.basePos=e.overlayPos=0),null==e.overlayCur?e.baseCur:null!=e.baseCur&&c?e.baseCur+" "+e.overlayCur:e.overlayCur},indent:a.indent&&function(b,c){return a.indent(b.base,c)},electricChars:a.electricChars,innerMode:function(b){return{state:b.base,mode:a}},blankLine:function(c){a.blankLine&&a.blankLine(c.base),b.blankLine&&b.blankLine(c.overlay)}}},function(){"use strict";function a(a,b,c){this.cm=a,this.getHints=b,this.options=c,this.widget=this.onClose=null}function b(a){return"string"==typeof a?a:a.text}function c(a,b){function c(a,c){var f;f="string"!=typeof c?function(a){return c(a,b)}:d.hasOwnProperty(c)?d[c]:c,e[a]=f}var d={Up:function(){b.moveFocus(-1)},Down:function(){b.moveFocus(1)},PageUp:function(){b.moveFocus(-b.menuSize())},PageDown:function(){b.moveFocus(b.menuSize())},Home:function(){b.setFocus(0)},End:function(){b.setFocus(b.length)},Enter:b.pick,Tab:b.pick,Esc:b.close},e=a.customKeys?{}:d;if(a.customKeys)for(var f in a.customKeys)a.customKeys.hasOwnProperty(f)&&c(f,a.customKeys[f]);if(a.extraKeys)for(var f in a.extraKeys)a.extraKeys.hasOwnProperty(f)&&c(f,a.extraKeys[f]);return e}function d(a,d){this.completion=a,this.data=d,this.options=a.options||{};var f=this,g=a.cm,h=a.options,i=this.hints=document.createElement("ul");i.className="CodeMirror-hints",this.selectedHint=0;for(var j=d.list,k=0;k<j.length;++k){var l=i.appendChild(document.createElement("li")),m=j[k],n="CodeMirror-hint"+(k?"":" CodeMirror-hint-active");null!=m.className&&(n=m.className+" "+n),l.className=n,m.render?m.render(l,d,m):l.appendChild(document.createTextNode(m.displayText||b(m))),l.hintId=k}var o=g.cursorCoords(h.alignWithWord!==!1?d.from:null),p=o.left,q=o.bottom,r=!0;i.style.left=p+"px",i.style.top=q+"px",this.options.ghosting&&(i.style.display=j.length>1?"block":"none");var s=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),t=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),u=i.getBoundingClientRect(),v=u.right-s,w=u.bottom-t;if(v>0&&(u.right-u.left>s&&(i.style.width=s-5+"px",v-=u.right-u.left-s),i.style.left=(p=o.left-v)+"px"),w>0){var x=u.bottom-u.top;u.top-(o.bottom-o.top)-x>0?(w=x+(o.bottom-o.top),r=!1):x>t&&(i.style.height=t-5+"px",w-=x-t),i.style.top=(q=o.bottom-w)+"px"}if((h.container||document.body).appendChild(i),g.addKeyMap(this.keyMap=c(h,{moveFocus:function(a){f.changeActive(f.selectedHint+a)},setFocus:function(a){f.changeActive(a)},menuSize:function(){return f.screenAmount()},length:j.length,close:function(){a.close()},pick:function(){f.pick()}})),h.closeOnUnfocus!==!1){var y;g.on("blur",this.onBlur=function(){y=setTimeout(function(){a.close()},100)}),g.on("focus",this.onFocus=function(){clearTimeout(y)})}var z=g.getScrollInfo();return g.on("scroll",this.onScroll=function(){var b=g.getScrollInfo(),c=g.getWrapperElement().getBoundingClientRect(),d=q+z.top-b.top,e=d-(window.pageYOffset||(document.documentElement||document.body).scrollTop);return r||(e+=i.offsetHeight),e<=c.top||e>=c.bottom?a.close():(i.style.top=d+"px",void(i.style.left=p+z.left-b.left+"px"))}),CodeMirror.on(i,"dblclick",function(a){var b=f.getHintElement(i,a.target||a.srcElement);b&&null!=b.hintId&&(f.changeActive(b.hintId),f.pick())}),CodeMirror.on(i,"click",function(a){var b=f.getHintElement(i,a.target||a.srcElement);b&&null!=b.hintId&&f.changeActive(b.hintId)}),CodeMirror.on(i,"mousedown",function(){setTimeout(function(){g.focus()},20)}),CodeMirror.signal(d,"select",j[0],i.firstChild),this.options.ghosting&&this.data.list[0]&&(this.removeGhost(),this.ghost=new e(this,this.data,this.data.list[0].displayText,this.pick.bind(this))),!0}function e(a,b,c,d){var e=this;if(this.cm=a.completion.cm,this.data=b,this.widget=a,this.completion=a.completion,this.cm.addKeyMap(this.keyMap={Tab:d||function(){e.accept()},Right:d||function(){e.accept()}}),!c)return this.remove();var f=this.suffix=c.substr(b.word.length);if(!f.length)return this.remove();var g=document.createElement("span");g.className="CodeMirror-hint-ghost",g.appendChild(document.createTextNode(f)),this._ghost=this.cm.setBookmark(this.data.to,{widget:g,insertLeft:!0})}CodeMirror.showHint=function(b,c,d){if(!b.somethingSelected()&&(null==c&&(c=b.getHelper(b.getCursor(),"hint")),null!=c)){b.state.completionActive&&b.state.completionActive.close();var e=b.state.completionActive=new a(b,c,d||{});return CodeMirror.signal(b,"startCompletion",b),e.options.async?void c(b,function(a){e.showHints(a)},e.options):e.showHints(c(b,e.options))}},a.prototype={close:function(){this.active()&&(this.widget&&this.widget.close(),this.onClose&&this.onClose(),this.cm.state.completionActive=null,CodeMirror.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(a,c){var d=a.list[c];d.hint?d.hint(this.cm,a,d):this.cm.replaceRange(b(d),a.from,a.to),this.close()},showHints:function(a){return a&&a.list.length&&this.active()?void(this.options.ghosting||0==this.options.completeSingle||1!=a.list.length?this.showWidget(a):this.pick(a,0)):this.close()},showWidget:function(a){function b(){h||(h=!0,j.close(),j.cm.off("cursorActivity",g),CodeMirror.signal(a,"close"))}function c(){return h?!0:j.widget?void 0:(b(),!0)}function e(){c()||(j.options.async?j.getHints(j.cm,f,j.options):f(j.getHints(j.cm,j.options)))}function f(a){if(!c()){if(!a||!a.list.length)return b();j.widget.close(),j.widget=new d(j,a)}}function g(){clearTimeout(i);var a=j.cm.getCursor(),b=j.cm.getLine(a.line);a.line!=l.line||b.length-a.ch!=m-l.ch||a.ch<l.ch||j.cm.somethingSelected()||a.ch&&k.test(b.charAt(a.ch-1))?j.close():i=setTimeout(e,170)}this.widget=new d(this,a),CodeMirror.signal(a,"shown");var h,i=null,j=this,k=this.options.closeCharacters||/[\s()\[\]{};:>,]/,l=this.cm.getCursor(),m=this.cm.getLine(l.line).length;this.cm.on("cursorActivity",g),this.onClose=b}},d.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap),this.removeGhost();var a=this.completion.cm;this.options.closeOnUnfocus!==!1&&(a.off("blur",this.onBlur),a.off("focus",this.onFocus)),a.off("scroll",this.onScroll)}},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(a){if(a=Math.max(0,Math.min(a,this.data.list.length-1)),this.selectedHint!=a){var b=this.hints.childNodes[this.selectedHint];b.className=b.className.replace(" CodeMirror-hint-active",""),b=this.hints.childNodes[this.selectedHint=a],b.className+=" CodeMirror-hint-active",this.options.ghosting&&(this.removeGhost(),this.ghost=new e(this,this.data,this.data.list[a].displayText,this.pick.bind(this))),b.offsetTop<this.hints.scrollTop?this.hints.scrollTop=b.offsetTop-3:b.offsetTop+b.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=b.offsetTop+b.offsetHeight-this.hints.clientHeight+3),CodeMirror.signal(this.data,"select",this.data.list[this.selectedHint],b)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},removeGhost:function(){return this.ghost?(this.ghost.remove(),this):void 0},getHintElement:function(a,b){for(;b&&b!==a&&!this.isHintElement(b);)b=b.parentNode;return b===a?void 0:b},isHintElement:function(a){return a.nodeName&&"LI"===a.nodeName.toUpperCase()&&-1!==a.className.split(/\s/).indexOf("CodeMirror-hint")}},e.prototype={accept:function(){return this.suffix&&this.data&&this.cm.replaceRange(this.suffix,this.data.to,this.data.to),this.remove()},remove:function(){return this._ghost&&this._ghost.clear(),this.cm.removeKeyMap(this.keyMap),delete this.ghost,delete this.suffix,delete this.widget.ghost,this}}}(),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/edit/matchbrackets")):"function"==typeof define&&define.amd?define(["../lib/codemirror","../addon/search/searchcursor","../addon/edit/matchbrackets"],a):a(CodeMirror)}(function(a){"use strict";function b(b,c,d){if(0>d&&0==c.ch)return b.clipPos(m(c.line-1));var e=b.getLine(c.line);if(d>0&&c.ch>=e.length)return b.clipPos(m(c.line+1,0));for(var f,g="start",h=c.ch,i=0>d?0:e.length,j=0;h!=i;h+=d,j++){var k=e.charAt(0>d?h-1:h),l="_"!=k&&a.isWordChar(k)?"w":"o";if("w"==l&&k.toUpperCase()==k&&(l="W"),"start"==g)"o"!=l&&(g="in",f=l);else if("in"==g&&f!=l){if("w"==f&&"W"==l&&0>d&&h--,"W"==f&&"w"==l&&d>0){f="w";continue}break}}return m(c.line,h)}function c(a,c){a.extendSelectionsBy(function(d){return a.display.shift||a.doc.extend||d.empty()?b(a.doc,d.head,c):0>c?d.from():d.to()})}function d(a,b){a.operation(function(){for(var c=a.listSelections().length,d=[],e=-1,f=0;c>f;f++){var g=a.listSelections()[f].head;if(!(g.line<=e)){var h=m(g.line+(b?0:1),0);a.replaceRange("\n",h,null,"+insertLine"),a.indentLine(h.line,null,!0),d.push({head:h,anchor:h}),e=g.line+1}}a.setSelections(d)})}function e(b,c){for(var d=c.ch,e=d,f=b.getLine(c.line);d&&a.isWordChar(f.charAt(d-1));)--d;for(;e<f.length&&a.isWordChar(f.charAt(e));)++e;return{from:m(c.line,d),to:m(c.line,e),word:f.slice(d,e)}}function f(a){var b=a.getCursor(),c=a.scanForBracket(b,-1);if(c)for(;;){var d=a.scanForBracket(b,1);if(!d)return;if(d.ch==q.charAt(q.indexOf(c.ch)+1))return a.setSelection(m(c.pos.line,c.pos.ch+1),d.pos,!1),!0;b=m(d.pos.line,d.pos.ch+1)}}function g(a,b){for(var c,d=a.listSelections(),e=[],f=0;f<d.length;f++){var g=d[f];if(!g.empty()){for(var h=g.from().line,i=g.to().line;f<d.length-1&&d[f+1].from().line==i;)i=g[++f].to().line;e.push(h,i)}}e.length?c=!0:e.push(a.firstLine(),a.lastLine()),a.operation(function(){for(var d=[],f=0;f<e.length;f+=2){var g=e[f],h=e[f+1],i=m(g,0),j=m(h),k=a.getRange(i,j,!1);b?k.sort():k.sort(function(a,b){var c=a.toUpperCase(),d=b.toUpperCase();return c!=d&&(a=c,b=d),b>a?-1:a==b?0:1}),a.replaceRange(k,i,j),c&&d.push({anchor:i,head:j})}c&&a.setSelections(d,0)})}function h(b,c){b.operation(function(){for(var d=b.listSelections(),f=[],g=[],h=0;h<d.length;h++){var i=d[h];i.empty()?(f.push(h),g.push("")):g.push(c(b.getRange(i.from(),i.to())))}b.replaceSelections(g,"around","case");for(var j,h=f.length-1;h>=0;h--){var i=d[f[h]];if(!(j&&a.cmpPos(i.head,j)>0)){var k=e(b,i.head);j=k.from,b.replaceRange(c(k.word),k.from,k.to)}}})}function i(b){var c=b.getCursor("from"),d=b.getCursor("to");if(0==a.cmpPos(c,d)){var f=e(b,c);if(!f.word)return;c=f.from,d=f.to}return{from:c,to:d,query:b.getRange(c,d),word:f}}function j(a,b){var c=i(a);if(c){var d=c.query,e=a.getSearchCursor(d,b?c.to:c.from);(b?e.findNext():e.findPrevious())?a.setSelection(e.from(),e.to()):(e=a.getSearchCursor(d,b?m(a.firstLine(),0):a.clipPos(m(a.lastLine()))),(b?e.findNext():e.findPrevious())?a.setSelection(e.from(),e.to()):c.word&&a.setSelection(c.from,c.to))}}var k=a.keyMap.sublime={fallthrough:"default"},l=a.commands,m=a.Pos,n=a.keyMap["default"]==a.keyMap.macDefault,o=n?"Cmd-":"Ctrl-";l[k["Alt-Left"]="goSubwordLeft"]=function(a){c(a,-1)},l[k["Alt-Right"]="goSubwordRight"]=function(a){c(a,1)};var p=n?"Ctrl-Alt-":"Ctrl-";l[k[p+"Up"]="scrollLineUp"]=function(a){var b=a.getScrollInfo();if(!a.somethingSelected()){var c=a.lineAtHeight(b.top+b.clientHeight,"local");a.getCursor().line>=c&&a.execCommand("goLineUp")}a.scrollTo(null,b.top-a.defaultTextHeight())},l[k[p+"Down"]="scrollLineDown"]=function(a){var b=a.getScrollInfo();if(!a.somethingSelected()){var c=a.lineAtHeight(b.top,"local")+1;a.getCursor().line<=c&&a.execCommand("goLineDown")}a.scrollTo(null,b.top+a.defaultTextHeight())},l[k["Shift-"+o+"L"]="splitSelectionByLine"]=function(a){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++)for(var e=b[d].from(),f=b[d].to(),g=e.line;g<=f.line;++g)f.line>e.line&&g==f.line&&0==f.ch||c.push({anchor:g==e.line?e:m(g,0),head:g==f.line?f:m(g)});a.setSelections(c,0)},k["Shift-Tab"]="indentLess",l[k.Esc="singleSelectionTop"]=function(a){var b=a.listSelections()[0];a.setSelection(b.anchor,b.head,{scroll:!1})},l[k[o+"L"]="selectLine"]=function(a){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){var e=b[d];c.push({anchor:m(e.from().line,0),head:m(e.to().line+1,0)})}a.setSelections(c)},k["Shift-"+o+"K"]="deleteLine",l[k[o+"Enter"]="insertLineAfter"]=function(a){d(a,!1)},l[k["Shift-"+o+"Enter"]="insertLineBefore"]=function(a){d(a,!0)},l[k[o+"D"]="selectNextOccurrence"]=function(b){var c=b.getCursor("from"),d=b.getCursor("to"),f=b.state.sublimeFindFullWord==b.doc.sel;if(0==a.cmpPos(c,d)){var g=e(b,c);if(!g.word)return;b.setSelection(g.from,g.to),f=!0}else{var h=b.getRange(c,d),i=f?new RegExp("\\b"+h+"\\b"):h,j=b.getSearchCursor(i,d);j.findNext()?b.addSelection(j.from(),j.to()):(j=b.getSearchCursor(i,m(b.firstLine(),0)),j.findNext()&&b.addSelection(j.from(),j.to()))}f&&(b.state.sublimeFindFullWord=b.doc.sel)};var q="(){}[]";l[k["Shift-"+o+"Space"]="selectScope"]=function(a){f(a)||a.execCommand("selectAll")},l[k["Shift-"+o+"M"]="selectBetweenBrackets"]=function(b){return f(b)?void 0:a.Pass},l[k[o+"M"]="goToBracket"]=function(b){b.extendSelectionsBy(function(c){var d=b.scanForBracket(c.head,1);if(d&&0!=a.cmpPos(d.pos,c.head))return d.pos;var e=b.scanForBracket(c.head,-1);return e&&m(e.pos.line,e.pos.ch+1)||c.head})};var r=n?"Cmd-Ctrl-":"Shift-Ctrl-";l[k[r+"Up"]="swapLineUp"]=function(a){for(var b=a.listSelections(),c=[],d=a.firstLine()-1,e=[],f=0;f<b.length;f++){var g=b[f],h=g.from().line-1,i=g.to().line;e.push({anchor:m(g.anchor.line-1,g.anchor.ch),head:m(g.head.line-1,g.head.ch)}),0!=g.to().ch||g.empty()||--i,h>d?c.push(h,i):c.length&&(c[c.length-1]=i),d=i}a.operation(function(){for(var b=0;b<c.length;b+=2){var d=c[b],f=c[b+1],g=a.getLine(d);a.replaceRange("",m(d,0),m(d+1,0),"+swapLine"),f>a.lastLine()?a.replaceRange("\n"+g,m(a.lastLine()),null,"+swapLine"):a.replaceRange(g+"\n",m(f,0),null,"+swapLine")}a.setSelections(e),a.scrollIntoView()})},l[k[r+"Down"]="swapLineDown"]=function(a){for(var b=a.listSelections(),c=[],d=a.lastLine()+1,e=b.length-1;e>=0;e--){var f=b[e],g=f.to().line+1,h=f.from().line;0!=f.to().ch||f.empty()||g--,d>g?c.push(g,h):c.length&&(c[c.length-1]=h),d=h}a.operation(function(){for(var b=c.length-2;b>=0;b-=2){var d=c[b],e=c[b+1],f=a.getLine(d);d==a.lastLine()?a.replaceRange("",m(d-1),m(d),"+swapLine"):a.replaceRange("",m(d,0),m(d+1,0),"+swapLine"),a.replaceRange(f+"\n",m(e,0),null,"+swapLine")}a.scrollIntoView()})},k[o+"/"]="toggleComment",l[k[o+"J"]="joinLines"]=function(a){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){for(var e=b[d],f=e.from(),g=f.line,h=e.to().line;d<b.length-1&&b[d+1].from().line==h;)h=b[++d].to().line;c.push({start:g,end:h,anchor:!e.empty()&&f})}a.operation(function(){for(var b=0,d=[],e=0;e<c.length;e++){for(var f,g=c[e],h=g.anchor&&m(g.anchor.line-b,g.anchor.ch),i=g.start;i<=g.end;i++){var j=i-b;i==g.end&&(f=m(j,a.getLine(j).length+1)),j<a.lastLine()&&(a.replaceRange(" ",m(j),m(j+1,/^\s*/.exec(a.getLine(j+1))[0].length)),++b)}d.push({anchor:h||f,head:f})}a.setSelections(d,0)})},l[k["Shift-"+o+"D"]="duplicateLine"]=function(a){a.operation(function(){for(var b=a.listSelections().length,c=0;b>c;c++){var d=a.listSelections()[c];d.empty()?a.replaceRange(a.getLine(d.head.line)+"\n",m(d.head.line,0)):a.replaceRange(a.getRange(d.from(),d.to()),d.from())}a.scrollIntoView()})},k[o+"T"]="transposeChars",l[k.F9="sortLines"]=function(a){g(a,!0)},l[k[o+"F9"]="sortLinesInsensitive"]=function(a){g(a,!1)},l[k.F2="nextBookmark"]=function(a){var b=a.state.sublimeBookmarks;if(b)for(;b.length;){var c=b.shift(),d=c.find();if(d)return b.push(c),a.setSelection(d.from,d.to)}},l[k["Shift-F2"]="prevBookmark"]=function(a){var b=a.state.sublimeBookmarks;if(b)for(;b.length;){b.unshift(b.pop());var c=b[b.length-1].find();if(c)return a.setSelection(c.from,c.to);b.pop()}},l[k[o+"F2"]="toggleBookmark"]=function(a){for(var b=a.listSelections(),c=a.state.sublimeBookmarks||(a.state.sublimeBookmarks=[]),d=0;d<b.length;d++){for(var e=b[d].from(),f=b[d].to(),g=a.findMarks(e,f),h=0;h<g.length;h++)if(g[h].sublimeBookmark){g[h].clear();for(var i=0;i<c.length;i++)c[i]==g[h]&&c.splice(i--,1);break}h==g.length&&c.push(a.markText(e,f,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},l[k["Shift-"+o+"F2"]="clearBookmarks"]=function(a){var b=a.state.sublimeBookmarks;if(b)for(var c=0;c<b.length;c++)b[c].clear();b.length=0},l[k["Alt-F2"]="selectBookmarks"]=function(a){var b=a.state.sublimeBookmarks,c=[];if(b)for(var d=0;d<b.length;d++){var e=b[d].find();e?c.push({anchor:e.from,head:e.to}):b.splice(d--,0)}c.length&&a.setSelections(c,0)},k["Alt-Q"]="wrapLines";var s=o+"K ";k[s+o+"Backspace"]="delLineLeft",l[k.Backspace="smartBackspace"]=function(b){if(b.somethingSelected())return a.Pass;var c=b.getCursor(),d=b.getRange({line:c.line,ch:0},c),e=a.countColumn(d,null,b.getOption("tabSize")),f=b.getOption("indentUnit");if(d&&!/\S/.test(d)&&e%f==0){var g=new m(c.line,a.findColumn(d,e-f,f));return g.ch==c.ch?a.Pass:b.replaceRange("",g,c,"+delete")}return a.Pass},l[k[s+o+"K"]="delLineRight"]=function(a){a.operation(function(){for(var b=a.listSelections(),c=b.length-1;c>=0;c--)a.replaceRange("",b[c].anchor,m(b[c].to().line),"+delete");a.scrollIntoView()})},l[k[s+o+"U"]="upcaseAtCursor"]=function(a){h(a,function(a){return a.toUpperCase()})},l[k[s+o+"L"]="downcaseAtCursor"]=function(a){h(a,function(a){return a.toLowerCase()})},l[k[s+o+"Space"]="setSublimeMark"]=function(a){a.state.sublimeMark&&a.state.sublimeMark.clear(),a.state.sublimeMark=a.setBookmark(a.getCursor())},l[k[s+o+"A"]="selectToSublimeMark"]=function(a){var b=a.state.sublimeMark&&a.state.sublimeMark.find();b&&a.setSelection(a.getCursor(),b)},l[k[s+o+"W"]="deleteToSublimeMark"]=function(b){var c=b.state.sublimeMark&&b.state.sublimeMark.find();if(c){var d=b.getCursor(),e=c;if(a.cmpPos(d,e)>0){var f=e;e=d,d=f}b.state.sublimeKilled=b.getRange(d,e),b.replaceRange("",d,e)}},l[k[s+o+"X"]="swapWithSublimeMark"]=function(a){var b=a.state.sublimeMark&&a.state.sublimeMark.find();b&&(a.state.sublimeMark.clear(),a.state.sublimeMark=a.setBookmark(a.getCursor()),a.setCursor(b))},l[k[s+o+"Y"]="sublimeYank"]=function(a){null!=a.state.sublimeKilled&&a.replaceSelection(a.state.sublimeKilled,null,"paste")},k[s+o+"G"]="clearBookmarks",l[k[s+o+"C"]="showInCenter"]=function(a){var b=a.cursorCoords(null,"local");a.scrollTo(null,(b.top+b.bottom)/2-a.getScrollInfo().clientHeight/2)},l[k["Shift-Alt-Up"]="selectLinesUpward"]=function(a){a.operation(function(){for(var b=a.listSelections(),c=0;c<b.length;c++){var d=b[c];d.head.line>a.firstLine()&&a.addSelection(m(d.head.line-1,d.head.ch))}})},l[k["Shift-Alt-Down"]="selectLinesDownward"]=function(a){a.operation(function(){for(var b=a.listSelections(),c=0;c<b.length;c++){var d=b[c];d.head.line<a.lastLine()&&a.addSelection(m(d.head.line+1,d.head.ch))}})},l[k[o+"F3"]="findUnder"]=function(a){j(a,!0)},l[k["Shift-"+o+"F3"]="findUnderPrevious"]=function(a){j(a,!1)},l[k["Alt-F3"]="findAllUnder"]=function(a){var b=i(a);if(b){for(var c=a.getSearchCursor(b.query),d=[],e=-1;c.findNext();)d.push({anchor:c.from(),head:c.to()}),c.from().line<=b.from.line&&c.from().ch<=b.from.ch&&e++;a.setSelections(d,e)}},k["Shift-"+o+"["]="fold",k["Shift-"+o+"]"]="unfold",k[s+o+"0"]=k[s+o+"j"]="unfoldAll",k[o+"I"]="findIncremental",k["Shift-"+o+"I"]="findIncrementalReverse",k[o+"H"]="replace",k.F3="findNext",k["Shift-F3"]="findPrev",a.sublimeKeyMap=k}),function(){"use strict";!function(){angular.module("raml",[]).factory("ramlParser",function(){return RAML.Parser}),RAML.Settings=RAML.Settings||{}}(),angular.module("ramlEditorApp",["ui.bootstrap.modal","ui.bootstrap.tpls","ui.tree","codeMirror","fs","raml","stringFilters","utils","lightweightDOM","splitter","validate","autoFocus","rightClick","dragAndDrop","cfp.hotkeys","firebase"]).run(["$window","hotkeys",function(a,b){a.RAML.Settings.proxy="/proxy/",a.RAML.Settings.firebase=!1,b.add({combo:"mod+S",description:"Save current file"}),b.add({combo:"shift+mod+S",description:"Save All"}),b.add({combo:"mod+E",description:"Extract to"}),b.add({combo:"mod + p",description:"Show global search"}),b.add({combo:"Ctrl+Space",description:"Start autocomplete"}),b.add({combo:"mod+/",description:"Toggle Comment"}),b.add({combo:"shift+mod+A",description:"Select Resource"}),b.add({combo:"mod+Ctrl+down",description:"Swap line down"}),b.add({combo:"mod+Ctrl+up",description:"Swap line up"}),b.add({combo:"mod+D",description:"Select next occurrence"}),b.add({combo:"mod+K mod+K",description:"Delete line right"}),b.add({combo:"mod+K mod+L",description:"Down case at cursor"}),b.add({combo:"mod+K mod+U",description:"Up case at cursor"}),b.add({combo:"mod+L",description:"Select line"}),b.add({combo:"shift+Alt+down",description:"Select lines downward"}),b.add({combo:"shift+Alt+up",description:"Select lines upward"}),b.add({combo:"shift+mod+D",description:"Duplicate line"}),b.add({combo:"shift+Tab",description:"Indent less"}),b.del("?")}]).config(["hotkeysProvider",function(a){a.templateTitle="Keyboard Shortcuts";var b=['<div class="cfp-container" ng-class="{in: helpVisible}" style="display: none;">','  <h4 class="cfp-hotkeys-title" ng-if="!header">{{ title }}</h4>','  <div ng-bind-html="header" ng-if="header"></div>',"  <div>","    <table>","      <tbody>","        <tr ng-repeat=\"hotkey in hotkeys | filter:{ description: '!$$undefined$$' }\">",'          <td class="cfp-hotkeys-keys">','            <span ng-repeat="key in hotkey.format() track by $index" class="cfp-hotkeys-key">{{ key }}</span>',"          </td>",'          <td class="cfp-hotkeys-text">{{ hotkey.description }}</td>',"        </tr>","      </tbody>","    </table>","  </div>","</div>",'<div class="cfp-overlay" ng-class="{in: helpVisible}" style="display: none;"></div>'];a.template=b.join("\n")}])}(),function(){"use strict";angular.module("utils",[]).value("indentUnit",2).factory("safeApply",["$rootScope","$exceptionHandler",function(a,b){return function(c,d){if(c=c||a,-1===["$apply","$digest"].indexOf(c.$root&&c.$root.$$phase||c.$$phase))return c.$apply(d);try{return c.$eval(d)}catch(e){b(e)}}}]).factory("safeApplyWrapper",["safeApply",function(a){return function(b,c){return function(){var d=Array.prototype.slice.call(arguments,0);return a(b,function(){return c.apply(this,d)})}}}]).factory("getTime",function(){return Date.now||function(){return(new Date).getTime()}}).factory("debounce",["$timeout","$q",function(a,b){return function(c,d){var e=null,f=b.defer();return function(){var g=this,h=arguments,i=function(){e=null,f.resolve(c.apply(g,h)),f=b.defer()};return e&&a.cancel(e),e=a(i,d),f.promise}}}]).factory("throttle",["getTime","$timeout",function(a,b){function c(c,d,e){var f,g,h,i=null,j=0;e||(e={});var k=function(){j=e.leading===!1?0:a(),i=null,h=c.apply(f,g)};return function(){var l=a();j||e.leading!==!1||(j=l);var m=d-(l-j);return f=this,g=arguments,0>=m?(b.cancel(i),i=null,j=l,h=c.apply(f,g)):i||e.trailing===!1||(i=b(k,m)),h}}return c}]).value("generateSpaces",function(a){return a=a||0,new Array(a+1).join(" ")}).factory("generateTabs",["generateSpaces","indentUnit",function(a,b){return function(c,d){return d=d||b,c=c||0,new Array(c+1).join(a(b))}}]).value("$prompt",function(a,b){return window.prompt(a,b)}).value("$confirm",function(a){return window.confirm(a)}).factory("generateName",function(){return function(a,b,c){c=c?"."+c:"";var d=Math.max.apply(void 0,a.map(function(a){var c=new RegExp(b+"(\\d+)"),d=a.match(c);return d?d[1]:0}).concat(0));return b+(d+1)+c}}).factory("scroll",function(){function a(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1}function b(b){return d[b.keyCode]?void a(b):void 0}function c(b){a(b)}var d={37:!0,38:!0,39:!0,40:!0};return{enable:function(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",c,!1),window.onmousewheel=document.onmousewheel=document.onkeydown=null},disable:function(){window.addEventListener&&window.addEventListener("DOMMouseScroll",c,!1),window.onmousewheel=document.onmousewheel=c,document.onkeydown=b}}})}(),function(){"use strict";angular.module("raml").value("config",{set:function(a,b){localStorage["config."+a]=b},get:function(a,b){return a="config."+a,a in localStorage?localStorage[a]:b},remove:function(a){delete localStorage["config."+a]},clear:function(){localStorage.clear()}})}(),function(){"use strict";angular.module("lightweightDOM",["lightweightParse"]).factory("getNode",["getSpaceCount","getTabCount","getLineIndent","isArrayStarter","isCommentStarter","extractKeyValue",function(a,b,c,d,e,f){function g(a,b,f){this.editor=a,this.lineNumber=b,this.line=f,this.lineIndent=c(this.line,a.getOption("indentUnit")),this.isEmpty=this.lineIndent.spaceCount===this.line.length,this.isComment=!this.isEmpty&&e(this.line),this.isArrayStarter=!this.isComment&&d(this.line),this.isStructural=!this.isEmpty&&!this.isComment}function h(b,c){var d=b.getCursor(),e=arguments.length>1?c:d.line,f=b.getLine(e),h=i[e];if(void 0===f)return null;if(d.line===e){var j=a(f);(j===f.length||"#"===f[j])&&(f=f.slice(0,d.ch))}return h&&h.line===f||(h=i[e]=new g(b,e,f)),h}var i={};return g.prototype.getKeyValue=function(){return this.keyValue||(this.keyValue=f(this.line)),this.keyValue},g.prototype.getKey=function(){return this.getKeyValue().key},g.prototype.getValue=function(){return this.getKeyValue().value},g.prototype.getNextSibling=function(){for(var a=this.lineNumber;;){var b=h(this.editor,++a);if(null===b)return null;if(b.isStructural){if(b.lineIndent.tabCount===this.lineIndent.tabCount)return b;if(this.isArrayStarter&&!b.isArrayStarter&&b.lineIndent.tabCount===this.lineIndent.tabCount+1)return b;if(!this.isArrayStarter&&b.isArrayStarter&&b.lineIndent.tabCount===this.lineIndent.tabCount-1)return b;if(b.lineIndent.tabCount<this.lineIndent.tabCount)return null}}},g.prototype.getPreviousSibling=function(){for(var a=this.lineNumber;;){a-=1;var b=h(this.editor,a);if(null===b)return null;if(b.isStructural){if(b.lineIndent.tabCount===this.lineIndent.tabCount)return b;if(this.isArrayStarter&&!b.isArrayStarter&&b.lineIndent.tabCount===this.lineIndent.tabCount+1)return b;if(!this.isArrayStarter&&b.isArrayStarter&&b.lineIndent.tabCount===this.lineIndent.tabCount-1)return b;if(b.lineIndent.tabCount<this.lineIndent.tabCount)return null}}},g.prototype.getFirstChild=function(){for(var a=this.lineIndent.tabCount+(this.isArrayStarter?2:1),b=this.lineNumber;;){var c=h(this.editor,++b);if(null===c)return null;if(c.lineIndent.tabCount<a)return null;if(c.lineIndent.tabCount>=a&&c.isStructural)return c}},g.prototype.getParent=function(){for(var a=this.lineIndent.tabCount-(!this.isArrayStarter&&this.getIsInArray()?2:1),b=this.lineNumber;;){var c=h(this.editor,--b);if(null===c)return null;if(c.lineIndent.tabCount<=a&&c.isStructural)return c}},g.prototype.getChildren=function(){for(var a=[],b=this.getFirstChild();null!==b;)a.push(b),b=b.getNextSibling();return a},g.prototype.getSelfAndNeighbors=function(){for(var a=[],b=this.getIsInArray(),c=this;c&&c.getIsInArray()===b&&(a.push(c),!c.isArrayStarter);)c=c.getPreviousSibling();for(c=this.getNextSibling();c&&!c.isArrayStarter&&c.getIsInArray()===b;)a.push(c),c=c.getNextSibling();return a},g.prototype.getIsInArray=function(){if(this.isArrayStarter)return!0;for(var a=this.getPreviousSibling();a&&a.lineIndent.tabCount>=this.lineIndent.tabCount;)a=a.getPreviousSibling();return!(!a||!a.isArrayStarter||a.lineIndent.tabCount!==this.lineIndent.tabCount-1)},g.prototype.getPath=function(){for(var a=[],b=this;b=b.getParent();)a.unshift(b);return a},g.prototype.selfOrParent=function(a){return this.first(this.getParent,a)},g.prototype.selfOrPrevious=function(a){return this.first(this.getPreviousSibling,a)},g.prototype.first=function(a,b){for(var c=this;c;){if(b(c))return c;c=a.apply(c)}return null},h}])}(),function(){"use strict";angular.module("lightweightParse",["utils"]).factory("getEditorTextAsArrayOfLines",function(){var a="",b=[];return function(c){if(a===c.getValue())return b;a=c.getValue(),b=[];for(var d=0,e=c.lineCount();e>d;d++)b.push(c.getLine(d));return b}}).factory("getSpaceCount",function(){
return function(a){for(var b=0,c=a.length;c>b&&" "===a[b];b++);return b}}).factory("getTabCount",["indentUnit",function(a){return function(b,c){return c=c||a,Math.floor(b/c)}}]).factory("getLineIndent",["getSpaceCount","getTabCount",function(a,b){return function(c,d){var e=a(c);return{spaceCount:e,tabCount:b(e,d),content:e?c.slice(e):c}}}]).factory("isArrayStarter",["getSpaceCount",function(a){return function(b){var c=a(b);return"-"===b[c]&&" "===b[c+1]}}]).factory("isCommentStarter",["getSpaceCount",function(a){return function(b){var c=a(b);return"#"===b[c]}}]).factory("extractKeyValue",function(){function a(a,b,c){for(b=b||0,c=c||a.length,0>b&&(b=a.length+b),0>c&&(c=a.length+c);c>b&&" "===a[b];)b+=1;for(;c>b&&" "===a[c-1];)c-=1;return 0===b&&c===a.length?a:a.slice(b,c)}function b(a){return a?{text:a,isAlias:"&"===a[0],isReference:"*"===a[0]}:null}return function(c){var d=0,e=c.length,f=c.indexOf("#");return-1!==f&&(e=f),f=c.indexOf("- "),-1!==f&&e>f&&(d=f+2),f=c.indexOf(": ",d),-1!==f&&e>f?{key:a(c,d,f),value:b(a(c,f+2,e))}:(f=c.lastIndexOf(":",e),f===e-1?{key:a(c,d,e-1),value:null}:{key:null,value:b(a(c,d,e))})}}).factory("getScopes",["getLineIndent",function(a){function b(a,b){if(void 0===a||void 0===b)return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}var c;return function(d){if(c&&b(c.key,d))return c.value;var e={},f=d.map(function(b,c){var d=a(b);return{tabCount:d.tabCount,content:d.content,lineNumber:c}}),g=f.reduce(function(a,b){var c,d,f=e[b.tabCount-1];if(f)c=f.length-1,d=e[b.tabCount-1][c];else{if(b.tabCount>1)return f=e[b.tabCount-2],f&&(c=f.length-1,d=e[b.tabCount-2][c],a[d]=a[d]||[],a[d].push({lineNumber:b.lineNumber,content:b.content,tabCount:b.tabCount}),e[b.tabCount-1]=e[b.tabCount-1]||[],e[b.tabCount-1].push(b.lineNumber)),a;d=0}return a[d]=a[d]||[],a[d].push({lineNumber:b.lineNumber,content:b.content,tabCount:b.tabCount}),e[b.tabCount]=e[b.tabCount]||[],e[b.tabCount].push(b.lineNumber),a},{});return c={result:{scopeLevels:e,scopesByLine:g},lines:d},{scopeLevels:e,scopesByLine:g}}}])}(),function(){"use strict";angular.module("codeFolding",["raml","lightweightParse"]).factory("getFoldRange",["getLineIndent",function(a){return function(b,c){var d,e=b.getLine(c.line),f=a(e);if(f.content){var g=b.getLine(c.line+1);if(g){var h=f.tabCount,i=a(g).tabCount;if(i>h)for(var j=c.line+2,k=b.lineCount();k>j;j++){if(g=b.getLine(j),d=a(g),i=d.tabCount,h>=i&&d.content)return g=b.getLine(j-1),{from:CodeMirror.Pos(c.line,e.length),to:CodeMirror.Pos(j-1,g.length)};if(j===k-1)return g=b.getLine(k-1),{from:CodeMirror.Pos(c.line,e.length),to:CodeMirror.Pos(k-1,g.length)}}}}}}])}(),function(){"use strict";angular.module("codeMirror",["raml","ramlEditorApp","codeFolding"]).factory("codeMirror",["ramlHint","codeMirrorHighLight","generateSpaces","generateTabs","getFoldRange","isArrayStarter","getSpaceCount","getTabCount","config","extractKeyValue","eventEmitter","getNode","ramlEditorContext","hotkeys",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=null,p={CodeMirror:CodeMirror};p.removeTabs=function(a,b){var c=h(g(a),b)*b;return c?a.slice(c):a},p.tabKey=function(a){var b,d,e,f=a.getCursor(),g=a.getLine(f.line),h=a.getOption("indentUnit");return a.somethingSelected()?void a.indentSelection("add"):(d=p.removeTabs(g,h),d=d.length?d:"",e=""!==d&&""===d.replace(/ /g,"")?h-d.length:h,b=c(e),void a.replaceSelection(b,"end","+input"))},p.backspaceKey=function(a){var b=a.getCursor(),c=a.getLine(b.line).slice(0,b.ch),d=a.getOption("indentUnit"),e=c.length-c.replace(/\s+$/,"").length,f=e>=d;if(f&&e%d===0)for(var g=0;d>g;g++)a.deleteH(-1,"char");else a.deleteH(-1,"char")};var q,r={xml:{name:"xml"},xsd:{name:"xml",alignCDATA:!0},json:{name:"javascript",json:!0},md:{name:"gfm"},raml:{name:"raml"}},s=CodeMirror.keyMap["default"]===CodeMirror.keyMap.macDefault,t=s?"Cmd-":"Ctrl-",u=s?"Cmd-Ctrl-":"Shift-Ctrl-",v={"Shift-Ctrl-T":"toggleTheme","Shift-Tab":"indentLess","Ctrl-Space":"autocomplete","Shift-Alt-Up":CodeMirror.sublimeKeyMap["Shift-Alt-Up"],"Shift-Alt-Down":CodeMirror.sublimeKeyMap["Shift-Alt-Down"],"Ctrl-H":"toggleCheatSheet"};v[t+"S"]="save",v["Shift-"+t+"S"]="saveAll",v[t+"P"]="showOmniSearch",v[t+"D"]=CodeMirror.sublimeKeyMap[t+"D"],v[t+"L"]=CodeMirror.sublimeKeyMap[t+"L"],v[u+"Up"]=CodeMirror.sublimeKeyMap[u+"Up"],v[u+"Down"]=CodeMirror.sublimeKeyMap[u+"Down"],v[t+"K "+t+"K"]=CodeMirror.sublimeKeyMap[t+"K "+t+"K"],v[t+"K "+t+"U"]=CodeMirror.sublimeKeyMap[t+"K "+t+"U"],v[t+"K "+t+"L"]=CodeMirror.sublimeKeyMap[t+"K "+t+"L"],v["Shift-"+t+"D"]=CodeMirror.sublimeKeyMap["Shift-"+t+"D"],q=angular.extend({},v),q[t+"/"]="toggleComment",q[t+"E"]="extractTo",q["Shift-"+t+"A"]="selectResource",CodeMirror.normalizeKeyMap(q),CodeMirror.normalizeKeyMap(v);var w=function(a){a.getLine(a.getCursor().line).trim()&&a.execCommand("autocomplete")};return p.configureEditor=function(a,b){var c=r[b]||r.raml;a.setOption("mode",c),"raml"===c.name?(a.setOption("extraKeys",q),a.on("change",w)):(a.setOption("extraKeys",v),a.off("change",w))},p.enterKey=function(a){function b(b,c){for(var d=b-1;d>=0;d--)if(g(a.getLine(d))<c)return j(a.getLine(d)).key}var e=a.getCursor(),h=e.ch>=a.getLine(e.line).length-1,i=a.getLine(e.line).slice(0,e.ch),k=f(i),l=g(i),m=c(l),n=b(e.line,l),o=-1!==["traits","resourceTypes"].indexOf(n);h?!function(){if(o)return void(m+=d(2));if(k&&(m+=d(1)),"|"===i.replace(/\s+$/,"").slice(-1))return void(m+=d(1));var b=a.getLine(e.line+1);b&&g(b)>l&&(m+=d(1))}():k&&(m+=d(1)),a.replaceSelection("\n"+m,"end","+input")},p.createEditor=function(a,b){var c,d,e=JSON.parse(i.get("folding","true")),f=!1;e&&(f={rangeFinder:CodeMirror.fold.indent,foldOnChangeTimeSpan:300,updateViewportTimeSpan:200}),d={styleActiveLine:!0,mode:"raml",theme:"solarized dark",lineNumbers:!0,lineWrapping:!0,autofocus:!0,indentWithTabs:!1,indentUnit:2,tabSize:2,keyMap:"tabSpace",foldGutter:f,gutters:["CodeMirror-lint-markers","CodeMirror-linenumbers","CodeMirror-foldgutter"]},b&&Object.keys(b).forEach(function(a){d[a]=b[a]}),c=new CodeMirror(a,d),c.setSize("100%","100%"),c.foldCode(0,{rangeFinder:CodeMirror.fold.indent}),p.cm=c;var g=c.defaultCharWidth(),h=4;return c.on("renderLine",function(a,b,c){var d=CodeMirror.countColumn(b.text,null,a.getOption("tabSize"))*g;c.style.textIndent="-"+d+"px",c.style.paddingLeft=h+d+"px"}),c.on("mousedown",function(a,b){var c=b.target;if("cm-link"===c.className){var d=c.innerText.match(/!include(.*)/).pop().trim();k.publish("event:editor:include",{path:d})}}),c.on("cursorActivity",function(){k.publish("event:editor:context",{context:m.context,cursor:c.getCursor()})}),c.on("change",function(a){a.operation(function(){m.read(a.getValue().split("\n"))})}),c.on("mousedown",function(){k.publish("event:editor:click")}),c.on("focus",function(a){a.operation(function(){Object.keys(m.context).length>0&&k.publish("event:editor:context",{context:m.context,cursor:a.getCursor()})})}),c},p.initEditor=function(){var a=document.getElementById("code"),b=p.createEditor(a);return o=window.editor=b,b},p.getEditor=function(){return o},function(){function c(a){return isNaN(a)?0:a-1}function d(a){var b=window.editor,c=b.getScrollInfo().clientHeight,d=b.charCoords(a,"local");b.setCursor(a),b.scrollTo(null,(d.top+d.bottom-c)/2)}function f(a){return a=a.replace(/\s/g,"").indexOf("#")?"# "+a:a.replace(/# /g,"")}CodeMirror.keyMap.tabSpace={Tab:p.tabKey,Backspace:p.backspaceKey,Enter:p.enterKey,fallthrough:"default"},k.subscribe("event:goToLine",function(a){var b={line:c(a.line),ch:0};a.focus&&window.editor.focus(),d(b)}),k.subscribe("event:goToResource",function(a){var b=m.context,c="/"+a.scope.split("/")[1],e=b.metadata[c]||b.metadata[a.scope],f=e.startAt,g=e.endAt||b.content.length,h=0,i=window.editor,j=null,k=a.text;if(a.text!==a.resource){j="";var l=a.scope.split("/");l=l.slice(1,l.length);for(var n=0;n<l.length;n++){var o=l[n];if(o!==k&&(j+="/"+o),o===k&&a.index&&a.index===n){j+="/"+o;break}if(o===k&&a.index&&(j+="/"+o),!a.index&&o===k){j+="/"+o;break}}}j=j?j:a.scope;for(var p=f;g>=p;p++)if(-1!==b.scopes[p].indexOf(j)){h=p;break}a.focus&&i.focus(),d({line:h,ch:0})}),CodeMirror.commands.save=function(){k.publish("event:save")},CodeMirror.commands.autocomplete=function(a){CodeMirror.showHint(a,CodeMirror.hint.raml,{ghosting:!0})},CodeMirror.commands.toggleTheme=function(){k.publish("event:toggle-theme")},CodeMirror.commands.showOmniSearch=function(){k.publish("event:open:omnisearch")},CodeMirror.commands.extractTo=function(a){k.publish("event:editor:extract-to",a)},CodeMirror.commands.saveAll=function(){k.publish("event:notification:save-all",{notify:!0})},CodeMirror.commands.toggleCheatSheet=function(){n.toggleCheatSheet()},CodeMirror.commands.selectResource=function(a){function b(a){return a.match(/^\s*/)[0].length}var c,d,e,f=m.context,g=a.getCursor("from").line,h=b(a.getLine(g)),i=0,j=0;for(d=g;d>=0;d--)if(c=a.getLine(d),e=b(c),h>e){i=d;break}for(d=g;d<=f.scopes.length-1;d++)if(c=a.getLine(d),e=b(c),h>e){j=d;break}j>0&&a.setSelection({line:i,ch:0},{line:j,ch:0})},CodeMirror.commands.toggleComment=function(a){var b=a.getSelection(),c=a.getCursor().line,d=a.getLine(c);if(b.replace(/\s/g,"")){for(var e=b.split("\n"),g=0;g<e.length;g++)e[g]=f(e[g]);a.replaceSelection(e.join("\n"))}else a.replaceRange(f(d),{line:c,ch:0},{line:c,ch:a.getLine(c).length})},CodeMirror.defineMode("raml",b.highlight),CodeMirror.defineMIME("text/x-raml","raml"),CodeMirror.registerHelper("hint","raml",a.autocompleteHelper),CodeMirror.registerHelper("fold","indent",e)}(),p}])}(),function(){"use strict";angular.module("codeMirror").factory("codeMirrorErrors",["codeMirror","$timeout",function(a,b){function c(a,b){function c(a){return d.parentNode?(d.style.top=Math.max(0,a.clientY-d.offsetHeight-5)+"px",void(d.style.left=a.clientX+5+"px")):l.off(document,"mousemove",c)}var d=document.createElement("div");return d.className="CodeMirror-lint-tooltip",d.appendChild(b.cloneNode(!0)),document.body.appendChild(d),l.on(document,"mousemove",c),c(a),null!==d.style.opacity&&(d.style.opacity=1),d}function d(a){a.parentNode&&a.parentNode.removeChild(a)}function e(a){a.parentNode&&(null===a.style.opacity&&d(a),a.style.opacity=0,b(function(){d(a)},200))}function f(a,b,d){function f(){l.off(d,"mouseout",f),g&&(e(g),g=null)}var g=c(a,b),h=setInterval(function(){if(!g)return clearInterval(h);for(var a=d;;a=a.parentNode){if(a===document.body)return;if(!a){f();break}}},400);l.on(d,"mouseout",f)}function g(a){a.clearGutter(m)}function h(a,b){return"error"===a?a:b}function i(a){for(var b=[],c=0;c<a.length;++c){var d=a[c],e=d.line;(b[e]||(b[e]=[])).push(d)}return b}function j(a){var b=a.severity;n.test(b)||(b="error");var c=document.createElement("div");return c.className="CodeMirror-lint-message-"+b,c.appendChild(document.createTextNode(a.message)),c}function k(a,b,c,d,e){var g=document.createElement("div"),h=g;return g.className="CodeMirror-lint-marker-"+b,g.innerHtml="&#x25cf; hola",c&&(h=g.appendChild(document.createElement("div")),h.className="CodeMirror-lint-marker-multiple"),d!==!1&&l.on(h,"mouseover",function(b){f(b,a,h)}),g.setAttribute("data-marker-line",e[0].line),g.setAttribute("data-marker-message",e[0].message),g}var l=a.CodeMirror,m="CodeMirror-lint-markers",n=/^(?:error|warning)$/,o={};return o.displayAnnotations=function(b){var c=a.getEditor(),d=i(b);this.clearAnnotations();for(var e=0;e<d.length;++e){var f=d[e];if(f){for(var g=null,l=document.createDocumentFragment(),o=0;o<f.length;++o){var p=f[o],q=p.severity;n.test(q)||(q="error"),g=h(g,q),l.appendChild(j(p))}c.setGutterMarker(e-1,m,k(l,g,f.length>1,!0,f))}}},o.clearAnnotations=function(){var b=a.getEditor();g(b)},o}])}(),function(){"use strict";angular.module("ramlEditorApp").factory("getNeighborLines",["getLineIndent","isArrayStarter",function(a,b){return function(c,d){"number"!=typeof d&&(d=c.getCursor().line);var e,f,g,h=[d],i=c.getLine(d).slice(0,c.getCursor().ch+1),j=a(i),k=b(i),l=c.lineCount();for(e=d-1;e>=0;e--)if(f=c.getLine(e),g=a(f),g.tabCount===j.tabCount){if(b(f))break;h.push(e)}else if(g.tabCount<j.tabCount){!k&&b(f)&&g.tabCount+1===j.tabCount&&h.push(e);break}for(e=d+1;l>e;e++){if(f=c.getLine(e),g=a(f),g.tabCount!==j.tabCount){if(g.tabCount<j.tabCount)break;if(!k||g.tabCount!==j.tabCount+1)continue}else if(b(f))break;h.push(e)}return h.sort().map(function(a){return c.getLine(a)})}}]).factory("getNeighborKeys",["getNeighborLines","extractKeyValue",function(a,b){return function(c){return a(c).map(function(a){return b(a).key})}}]).factory("ramlHint",["generateTabs","getNeighborKeys","getTabCount","getScopes","getEditorTextAsArrayOfLines","getNode",function(a,b,c,d,e,f){var g={},h="#%RAML 0.8",i=new RegExp("^\\s*"+h+"\\s*$","i");return g.suggestRAML=RAML.Grammar.suggestRAML,g.getScopes=function(a){return d(e(a))},g.shouldSuggestVersion=function(a){var b=a.getCursor().line,c=a.getLine(b),d=i.test(c);return 0===b&&!d},g.isSuggestionInUse=function(a,b,c){var d=b.metadata.isText?c.map(function(a){return a.getValue()?a.getValue().text:null}):c.map(function(a){return a.getKey()});return-1!==d.indexOf(a)||!b.metadata.isText&&b.metadata.canBeOptional&&-1!==d.indexOf(a+"?")},g.getSuggestions=function(a){if(g.shouldSuggestVersion(a))return[{key:"#%RAML 0.8",metadata:{category:"main",isText:!0}}];var b=f(a),d=b.selfOrParent(function(a){return a.getValue()&&a.getValue().isReference});if(d)return[];if(b.isEmpty){var e=a.getCursor().ch,h=c(e);if(h<=b.lineIndent.tabCount){var i=e%a.getOption("indentUnit")===0;if(!i)return[]}h=Math.min(h,b.lineIndent.tabCount),b=b.selfOrParent(function(a){return a.lineIndent.tabCount===h})}var j=null,k=[],l=[];if(b){var m=b.getPath().map(function(a){return a.getKey()});j=g.suggestRAML(m),k=j.suggestions;var n=Object.keys(k).some(function(a){return k[a].metadata.isText}),o=j.metadata&&j.metadata.isList&&n;l=o?b.getParent().getChildren():b.getSelfAndNeighbors(),l=l.filter(function(a){return a.isStructural})}return k=Object.keys(k).filter(function(a){return!g.isSuggestionInUse(a,k[a],l)}).sort().map(function(a){return{key:a,metadata:k[a].metadata}}),k.isList=j&&j.metadata?j.metadata.isList:!1,k},g.canAutocomplete=function(a){var b=a.getCursor(),c=a.getLine(b.line),d=c.trim(),e=c.indexOf(d),f=b.line;return function(){var a=d.indexOf("#");return f>0&&-1!==a&&b.ch>a+e}()?!1:function(){var a=d.indexOf("/");return 0===a&&b.ch>=a+e}()?!1:function(){var a=d.indexOf(": ");return-1!==a&&b.ch>=a+e+2}()?!1:function(){var a=d.indexOf("- ");return 0===a&&b.ch<a+e}()?!1:!0},g.autocompleteHelper=function(a){function b(a){return!a.metadata.dynamic}var c,d,e,f,h,i=a.getCursor(),j=a.getLine(i.line),k=j.replace(/^\s+/,""),l=function(a,b,c){a.innerHTML=["<div>",c.displayText,"</div>",'<div class="category">',c.category,"</div>"].join("")};return g.canAutocomplete(a)?(d=g.getSuggestions(a),function(){var a=k.indexOf("#");-1!==a&&(0!==i.line||0!==a)&&(k=k.slice(0,a))}(),0===k.indexOf("- ")&&(k=k.slice(2)),function(){var a=k.match(/:(?:\s|$)/);a&&(k=k.slice(0,a.index),c=!0)}(),k=k.trim(),e=d.filter(b).map(function(a){var b=a.key;return a.metadata.isText||c||(b+=":"),{displayText:b,text:b,category:a.metadata.category,render:l}}),k&&(e=e.filter(function(a){return 0===a.text.indexOf(k)&&a.text.length!==k.length})),k?(f=j.indexOf(k),h=f+k.length):(f=i.ch,h=f),{word:k,list:e,from:CodeMirror.Pos(i.line,f),to:CodeMirror.Pos(i.line,h)}):void 0},g}])}(),function(){"use strict";angular.module("raml").value("snippets",{options:["options:","  description: <<insert text or markdown here>>"],head:["head:","  description: <<insert text or markdown here>>"],get:["get:","  description: <<insert text or markdown here>>"],post:["post:","  description: <<insert text or markdown here>>"],put:["put:","  description: <<insert text or markdown here>>"],"delete":["delete:","  description: <<insert text or markdown here>>"],trace:["trace:","  description: <<insert text or markdown here>>"],connect:["connect:","  description: <<insert text or markdown here>>"],patch:["patch:","  description: <<insert text or markdown here>>"],"<resource>":["/newResource:","  displayName: resourceName"],title:["title: My API"],version:["version: v0.1"],baseuri:["baseUri: http://server/api/{version}"]}).factory("ramlSnippets",["snippets",function(a){var b={};return b.getEmptyRaml=function(){return["#%RAML 0.8","title:"].join("\n")},b.getSnippet=function(b){var c=b.key,d=b.metadata||{},e=a[c.toLowerCase()];return e?e:d.isText?b.isList?[c]:[c,""]:[c+":"]},b}])}(),function(){"use strict";angular.module("codeMirror").value("highlightRootElement",function(a,b,c,d,e,f){return e<=d[a+".level"]&&(d[a+".level"]=0,d[a+".inside"]=!1),a.indexOf(f)>=0?(d[a+".level"]=e,d[a+".inside"]=!0,b):d[a+".inside"]?c:!1}).value("booleanValues",["true","false"]).factory("keywordRegex",["booleanValues",function(a){return new RegExp("\\b(("+a.join(")|(")+"))$","i")}]).factory("token",["keywordRegex","highlightRootElement","getLineIndent","indentUnit",function(a,b,c,d){return function(e,f){var g=e.peek(),h=f.escaped;if(f.escaped=!1,"#"===g&&"#%RAML 0.8"===e.string.trim())return e.skipToEnd(),"raml-tag";if("#"===g&&(0===e.pos||/\s/.test(e.string.charAt(e.pos-1))))return e.skipToEnd(),"comment";if(f.literal&&e.indentation()>f.keyCol)return e.skipToEnd(),"none";if(f.literal&&(f.literal=!1),e.sol()){if(f.keyCol=0,f.pair=!1,f.pairStart=!1,e.match(/---/))return"def";if(e.match(/\.\.\./))return"def";if(e.match(/\s*-\s+/))return"meta"}if(!f.pair&&e.match(/^\s*([a-z0-9\?\/\{\}\._\-])+(?=\s*:)/i)){var i=e.string.replace(/^\s+|\s+$/g,"").split(":")[0],j="?"===i.slice(-1)?i.slice(0,-1):i,k=c(e.string).tabCount;if(f.pair=!0,f.keyCol=e.indentation(),e.string.match(/^\s*\- /i)&&(f.keyCol+=d),(k<=f.methodLevel||0===i.indexOf("/"))&&(f.methodLevel=0,f.insideMethod=!1),-1!==["options","get","head","post","put","delete","trace","connect","patch"].indexOf(j))return f.methodLevel=k,f.insideMethod=!0,"method-title";if(f.insideMethod)return"method-content";var l=b("traits","trait-title","trait-content",f,k,i)||b("resourceTypes","resource-type-title","resource-type-content",f,k,i)||b("schemas","schema-title","schema-content",f,k,i)||b("securitySchemes","security-scheme-title","security-scheme-content",f,k,i);return l?l:0===i.indexOf("/")?"resource":"key"}if(f.pair&&e.match(/(!include.*)/))return"link";if(f.pair&&e.match(/^:\s*/))return f.pairStart=!0,"meta";if(e.match(/^(\{|\}|\[|\])/))return"{"===g?f.inlinePairs++:"}"===g?f.inlinePairs--:"["===g?f.inlineList++:f.inlineList--,"meta";if(f.inlineList>0&&!h&&","===g)return e.next(),"meta";if(f.inlinePairs>0&&!h&&","===g)return f.keyCol=0,f.pair=!1,f.pairStart=!1,e.next(),"meta";if(f.pairStart){if(e.match(/^\s*(\||\>)\s*/))return f.literal=!0,"meta";if(e.match(/^\s*(\&|\*)[a-z0-9\._\-]+\b/i))return"variable-2";if(0===f.inlinePairs&&e.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(f.inlinePairs>0&&e.match(/^\s*-?[0-9\.\,]+\s?(?=(,|\}))/))return"number";if(e.match(a))return"keyword"}return f.pairStart=!1,f.escaped="\\"===g,e.next(),null}}]).value("startState",function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}}).factory("yamlMode",["token","startState",function(a,b){return function(){return{token:a,startState:b}}}]).run(["codeMirror","yamlMode",function(a,b){var c=a.CodeMirror;c.defineMode("yaml",b),c.defineMIME("text/x-yaml","yaml")}])}(),function(){"use strict";angular.module("codeMirror").factory("codeMirrorHighLight",["indentUnit",function(a){var b={};return b.highlight=function(a){return b.indentationOverlay={token:function(a,b){if(void 0===b.cutoff||a.column()<=b.cutoff){if(a.match("  "))return"indent indent-col-"+a.column();if(a.match(" "))return"indent-incomplete"}a.skipToEnd()},startState:function(){return{}}},b.yaml=CodeMirror.overlayMode(CodeMirror.getMode(a,"yaml"),b.indentationOverlay),b.xml=CodeMirror.overlayMode(CodeMirror.getMode(a,"xml"),b.indentationOverlay),b.json=CodeMirror.overlayMode(CodeMirror.getMode(a,{name:"javascript",json:!0}),b.indentationOverlay),b.markdown=CodeMirror.overlayMode(CodeMirror.getMode(a,"gfm"),b.indentationOverlay),{startState:function(){return{token:b._yaml,localMode:null,localState:null,yamlState:b.yaml.startState()}},copyState:function(a){var c;return a.localState&&(c=CodeMirror.copyState(a.localMode,a.localState),c.parentIndentation||(c.parentIndentation=a.localState.parentIndentation)),{token:a.token,localMode:a.localMode,localState:c,yamlState:CodeMirror.copyState(b.yaml,a.yamlState)}},innerMode:function(a){return{state:a.localState||a.yamlState,mode:a.localMode||b.yaml}},token:function(a,b){return b.token(a,b)}}},b._yaml=function(a,c){return/(content|description):(\s?)\|/.test(a.string)&&b._setMode("markdown",a,c),/application\/json:/.test(a.string)&&b._setMode("json",a,c,2),/text\/xml:/.test(a.string)&&b._setMode("xml",a,c,2),b.yaml.token(a,c.yamlState)},b._xml=function(a,c){return b._applyMode("xml",a,c)},b._json=function(a,c){return b._applyMode("json",a,c)},b._markdown=function(a,c){return b._applyMode("markdown",a,c)},b._setMode=function(c,d,e,f){e.token=b["_"+c],e.localMode=b[c],e.localState=b[c].startState(),e.localState.parentIndentation=d.indentation()+(f||0),d.string.match(/^\s*\- /i)&&(e.localState.parentIndentation+=a),"markdown"===c&&(e.localState.base.parentIndentation=e.localState.parentIndentation)},b._applyMode=function(a,c,d){return/(schema|example):(\s?)\|/.test(c.string)?b._yaml(c,d):c.string.trim().length>0&&c.indentation()<=d.localState.parentIndentation?(d.token=b._yaml,d.localState=d.localMode=null,b._yaml(c,d)):(d.localState.overlay.cutoff=d.localState.parentIndentation,b[a].token(c,d.localState))},b}])}(),function(){"use strict";function a(a,b,c){c=c||{},"/"===a.slice(-1)&&a.length>1&&(a=a.slice(0,-1)),this.type="file",this.path=a,this.name=a.slice(a.lastIndexOf("/")+1),this.isDirectory=!1,this.name.lastIndexOf(".")>0&&(this.extension=this.name.slice(this.name.lastIndexOf(".")+1)),this.contents=b||"",this.persisted=c.persisted||!1,this.dirty=c.dirty||!this.persisted,this.root=c.root||b?b.startsWith("#%RAML 0.8"):void 0}angular.module("fs",["raml","utils"]).factory("ramlRepository",["$q","ramlSnippets","fileSystem","eventEmitter",function(b,c,d,e){function f(a){return".meta"!==a.path.slice(-5)}function g(a){return function(b){throw a.error=b,b}}function h(a,b){return a.isDirectory===b.isDirectory?a.name.localeCompare(b.name):a.isDirectory?-1:1}function i(a,b){for(var c,d=0,e=b.children.length-1;e>=d;)c=Math.floor((d+e)/2),h(b.children[c],a)>0?e=c-1:d=c+1;return d}function j(a,c){var d="/"===a.path?[""]:a.path.split("/"),e=c.path.split("/").slice(0,-1),f=b.when(a);return e.slice(d.length).forEach(function(a){f=f.then(function(c){var d=n.join(c.path,a),e=n.getByPath(d);return e?e.isDirectory?e:b.reject(new Error("Can not create directory, file already exists: "+d)):n.createDirectory(c,a)})}),f.then(function(a){var d=n.getByPath(c.path);return d?d.isDirectory&&c.isDirectory?d:b.reject(new Error("Path already exists: "+c.path)):(a.children.splice(i(c,a),0,c),c)})}function k(a,b){var c=a.path.slice(0,a.path.lastIndexOf("/"));return c+"/"+b}function l(b,c,d){"/"===b.slice(-1)&&b.length>1&&(b=b.slice(0,-1)),d=d||[],this.type="directory",this.path=b,this.name=b.slice(b.lastIndexOf("/")+1),this.meta=c,this.collapsed=!0,this.isDirectory=!0;var e={folder:[],file:[]};d.forEach(function(a){e[a.type||"file"].push(a)});var g=e.file.filter(f).map(function(b){return new a(b.path,b.content,{dirty:!1,persisted:!0,root:b.root})}),i=e.folder.map(function(a){return new l(a.path,a.meta,a.children)});this.children=i.concat(g).sort(h)}var m,n={},o="/";return n.supportsFolders=d.supportsFolders||!1,l.prototype.getDirectories=function(){return this.children.filter(function(a){return a.isDirectory})},l.prototype.getFiles=function(){return this.children.filter(function(a){return!a.isDirectory})},l.prototype.forEachChildDo=function(a){for(var b,c=this.children.slice();c.length>0;)b=c.shift(),b.isDirectory&&(c=c.concat(b.children)),a.call(b,b)},l.prototype.sortChildren=function(){this.children.sort(h)},n.sortingFunction=h,n.getParent=function(a){var b=a.path.slice(0,a.path.lastIndexOf("/"));return 0===b.length&&(b="/"),n.getByPath(b)},n.canExport=function(){return d.hasOwnProperty("exportFiles")},n.exportFiles=function(){return d.exportFiles()},n.createDirectory=function(a,c){var e=n.join(a.path,c),f=new l(e),g=n.getByPath(e);return g?b.when(g):j(a,f).then(function(){return d.createFolder(f.path)}).then(function(){return f})},n.generateDirectory=function(a,b){return n.createDirectory(a,b).then(function(a){return e.publish("event:raml-editor-directory-created",a),a})},n.loadDirectory=function(){return d.directory(o).then(function(a){return m=new l(a.path,a.meta,a.children)})},n.removeDirectory=function(a){var c=[];a.getDirectories().forEach(function(a){c.push(n.removeDirectory(a))}),a.getFiles().forEach(function(a){c.push(n.removeFile(a))});var f=n.getParent(a),g=f.children.indexOf(a);return-1!==g&&f.children.splice(g,1),b.all(c).then(function(){return d.remove(a.path)}).then(function(a){e.publish("event:raml-editor-directory-removed",a)})},n.renameDirectory=function(a,b){var c=k(a,b),f=d.rename(a.path,c);return a.forEachChildDo(function(b){b.path=b.path.replace(a.path,c)}),f.then(function(){return a.name=b,a.path=c,e.publish("event:raml-editor-filetree-modified",a),a},g(a))},n.saveFile=function(a){function b(){return a.dirty=!1,a.persisted=!0,a}return d.save(a.path,a.contents).then(b,g(a))},n.renameFile=function(a,c){function f(){return a.name=c,a.path=h,e.publish("event:raml-editor-filetree-modified",a),a}var h=k(a,c),i=a.persisted?d.rename(a.path,h):b.when(a);return i.then(f,g(a))},n.loadFile=function(a){function b(b){return a.dirty=!1,a.persisted=!0,a.loaded=!0,a.contents=b,a}return d.load(a.path).then(b,g(a))},n.removeFile=function(a){function c(){return a.dirty=!1,a.persisted=!1,Object.freeze(a)}var f,h=n.getParent(a);return f=a.persisted?d.remove(a.path):b.when(a),f.then(c,g(a)).then(function(){var b=h.children.indexOf(a);-1!==b&&h.children.splice(b,1),e.publish("event:raml-editor-file-removed",a)})},n.createFile=function(b,c){var d=n.join(b.path,c),f=new a(d);return j(b,f).then(function(){return e.publish("event:raml-editor-file-created",f),f})},n.generateFile=function(a,b,d,f){return n.createFile(a,b).then(function(a){return"raml"===a.extension&&(a.contents=d||c.getEmptyRaml()),f||e.publish("event:raml-editor-file-generated",a),a})},n.getByPath=function(a){if(a){if("/"===a)return m;a=a.replace(/\/$/,"");for(var b,c=m.children.slice();c.length;){if(b=c.shift(),b.path===a)return b;b.isDirectory&&(c=c.concat(b.children))}}},n.rename=function(a,b){return a.isDirectory?n.renameDirectory(a,b):n.renameFile(a,b)},n.remove=function(a){return a.isDirectory?n.removeDirectory(a):n.removeFile(a)},n.move=function(a,c){if(c.isDirectory){var e,f=n.join(c.path,a.name);return a.isDirectory?(e=d.rename(a.path,f),a.forEachChildDo(function(b){b.path=b.path.replace(a.path,f)})):e=a.persisted?d.rename(a.path,f):b.when(a),e.then(function(){return a.path=f,a},g(a))}},n.saveMeta=function(b,c){var d=new a(b.path+".meta",JSON.stringify(c));return n.saveFile(d).then(function(){return c})},n.loadMeta=function(){},n.join=function(){return Array.prototype.reduce.call(arguments,function(a,b){return null==b?a:"/"===b.charAt(0)?b:a.replace(/\/$/,"")+"/"+b},"/")},n}])}(),function(){"use strict";function a(){}a.prototype={directory:function(a){throw"Not implemented: FileSystem list invoked with [fullpath="+a+"]"},save:function(a,b){throw"Not implemented: FileSystem save invoked with [fullpath="+a+"] and [content="+b+"]"},createFolder:function(a){throw"Not implemented: FileSystem createFolder invoked with [fullpath="+a+"]"},load:function(a){throw"Not implemented: FileSystem load invoked with [fullpath="+a+"]"},remove:function(a){throw"Not implemented: FileSystem remove invoked with [fullpath="+a+"]"},rename:function(a,b){throw"Not implemented: FileSystem rename invoked with [source="+a+"] and [destination="+b+"]"}},angular.module("fs").factory("fileSystem",["$injector","config",function(a,b){var c=b.get("fsFactory"),d=c&&a.has(c);return d||b.set("fsFactory",c="localStorageFileSystem"),a.get(c)}])}(),function(){"use strict";angular.module("ramlEditorApp").service("newFileService",["ramlRepository","newNameModal","eventEmitter",function(a,b,c){var d=this;return d.prompt=function(d,e,f,g,h,i){var j=d.isDirectory?d:a.getParent(d),k=e||"Add a new file",l=f||"Enter the path for the new file",m=[{message:"That file name is already taken.",validate:function(b){var c=a.join(j.path,b);return!a.getByPath(c)}}];return b.open(l,h||"",m,k).then(function(b){return a.generateFile(j,b,g,i).then(function(a){c.publish("event:editor:new:file",{file:a})})["catch"](function(a){return c.publish("event:notification",{message:a.message,expires:!0,level:"error"})})})},d}])}(),function(){"use strict";angular.module("ramlEditorApp").service("newFolderService",["ramlRepository","newNameModal",function(a,b){var c=this;return c.prompt=function(c){var d=c.isDirectory?c:a.getParent(c),e="Enter the path for the new folder",f="Add a new folder",g=[{message:"That folder name is already taken.",validate:function(b){var c=a.join(d.path,b);return!a.getByPath(c)}}];return b.open(e,"",g,f).then(function(b){return a.generateDirectory(d,b)})},c}])}(),function(){"use strict";angular.module("fs").constant("LOCAL_PERSISTENCE_KEY","localStorageFilePersistence").constant("FOLDER","folder").factory("localStorageHelper",["LOCAL_PERSISTENCE_KEY",function(a){return{forEach:function(b){for(var c in localStorage)localStorage.hasOwnProperty(c)&&0===c.indexOf(a+".")&&b(JSON.parse(localStorage.getItem(c)))},has:function(a){var b=!1;return a=a||"/",this.forEach(function(c){c.path.toLowerCase()===a.toLowerCase()&&(b=!0)}),b},set:function(b,c){localStorage.setItem(a+"."+b,JSON.stringify(c))},get:function(b){return JSON.parse(localStorage.getItem(a+"."+b))},remove:function(b){localStorage.removeItem(a+"."+b)}}}]).factory("localStorageFileSystem",["$window","$q","$prompt","$timeout","localStorageHelper","FOLDER",function(a,b,c,d,e,f){function g(a){return'file with path="'+a+'" does not exist'}function h(a,b){a.type===f&&(a.children=b(a.path))}function i(a){var b=[];return e.forEach(function(c){c.path.toLowerCase()===a.toLowerCase()&&(h(c,j),b.push(c))}),b.length>0?b[0]:null}function j(a){a.lastIndexOf("/")!==a.length-1&&(a+="/");var b=[];return e.forEach(function(c){c.path.toLowerCase()!==a.toLowerCase()&&o(c.path)+"/"===a&&(h(c,j),b.push(c))}),b}function k(a){return 0!==a.indexOf("/")?{valid:!1,reason:'Path should start with "/"'}:{valid:!0}}function l(a){var b=o(a);return e.has(b)||""===b?!0:!1}function m(a){var b=!1;return e.forEach(function(c){0===c.path.indexOf(a+"/")&&(b=!0)}),b}function n(a){var b=k(a);if(!b.valid)throw"Invalid Path!";return a.lastIndexOf("/")===a.length-1&&(a=a.slice(0,-1)),a.slice(a.lastIndexOf("/")+1)}function o(a){var b=k(a);if(!b.valid)throw"Invalid Path!";return a.lastIndexOf("/")===a.length-1&&(a=a.slice(0,-1)),a.slice(0,a.lastIndexOf("/"))}var p={},q=500;return p.supportsFolders=!0,p.directory=function(a){var c=b.defer();return d(function(){var b=k(a);return b.valid?(e.has("/")||e.set(a,{path:"/",name:"",type:"folder",meta:{created:Math.round((new Date).getTime()/1e3)}}),void c.resolve(i(a))):(c.reject(b.reason),c.promise)},q),c.promise},p.save=function(a,c){var g=b.defer();return d(function(){var b=n(a),d=e.get(a);if(!l(a))return g.reject(new Error("Parent folder does not exists: "+a)),g.promise;var h={};if(d){if(d.type===f)return g.reject("file has the same name as a folder"),g.promise;d.content=c,d.meta.lastUpdated=Math.round((new Date).getTime()/1e3),h=d}else h={path:a,name:b,content:c,type:"file",meta:{created:Math.round((new Date).getTime()/1e3)}};e.set(a,h),g.resolve()},q),g.promise},p.createFolder=function(a){var c=b.defer(),f=k(a);if(!f.valid)return c.reject(f.reason),c.promise;if(e.has(a))return c.reject(new Error("Folder already exists: "+a)),c.promise;var g=o(a);return e.has(g)?(d(function(){
e.set(a,{path:a,name:n(a),type:"folder",meta:{created:Math.round((new Date).getTime()/1e3)}}),c.resolve()},q),c.promise):(c.reject(new Error("Parent folder does not exists: "+a)),c.promise)},p.load=function(a){var c=b.defer();return d(function(){var b=e.get(a);b&&"file"===b.type?c.resolve(e.get(a).content):c.reject(g(a))},q),c.promise},p.remove=function(a){var c=b.defer();return d(function(){var b=e.get(a);return b&&b.type===f&&m(a)?(c.reject("folder not empty"),c.promise):(e.remove(a),void c.resolve())},q),c.promise},p.rename=function(a,c){var g=b.defer();return d(function(){var b=e.get(a);if(!b)return g.reject("Source file or folder does not exists."),g.promise;var d=e.get(c);return d?(g.reject("File or folder already exists."),g.promise):l(c)?(b.path=c,b.name=n(c),e.remove(c),e.remove(a),e.set(c,b),b.type===f&&e.forEach(function(b){if(b.path.toLowerCase()!==a.toLowerCase()&&0===b.path.indexOf(a)){var d=c+b.path.substring(a.length);e.remove(b.path),b.path=d,e.set(d,b)}}),void g.resolve()):(g.reject("Destination folder does not exist."),g.promise)},q),g.promise},p.exportFiles=function(){var b=new a.JSZip;e.forEach(function(a){if("/"!==a.path&&".meta"!==a.name.slice(-5)){var c=a.path.slice(1);"folder"===a.type?b.folder(c):b.file(c,a.content)}});var d=c("Please enter a ZIP file name:","api.zip");d&&a.saveAs(b.generate({type:"blob"}),d)},p}])}(),function(){"use strict";angular.module("ramlEditorApp").service("mockingServiceClient",["$http","$q","$window",function(a,b,c){var d=this;d.proxy=null,d.host="http://mocksvc.mulesoft.com",d.base="/mocks",d.buildURL=function(){var a=d.host+d.base+[""].concat(Array.prototype.slice.call(arguments,0)).join("/"),b=d.proxy||c.RAML.Settings.proxy;return b&&(a=b+a),a},d.simplifyMock=function(a){return{id:a.id,baseUri:a.baseUri,manageKey:a.manageKey}},d.getMock=function(c){return a.get(d.buildURL(c.id,c.manageKey)).then(function(a){return d.simplifyMock(a.data)},function(a){return 404!==a.status?b.reject(a):void 0})},d.createMock=function(b){return a.post(d.buildURL(),b).then(function(a){return d.simplifyMock(a.data)})},d.updateMock=function(b){return a({method:"PATCH",url:d.buildURL(b.id,b.manageKey),data:{raml:b.raml,json:b.json}}).then(function(a){return d.simplifyMock(angular.extend(b,a.data))})},d.deleteMock=function(b){return a["delete"](d.buildURL(b.id,b.manageKey))}}])}(),function(){"use strict";angular.module("ramlEditorApp").service("mockingService",["mockingServiceClient","ramlRepository",function(a,b){function c(a){return b.loadMeta(a).then(function(a){return a.mock})}function d(a,c){return b.loadMeta(a).then(function(d){return d.mock=c,b.saveMeta(a,d)}).then(function(){return c})}var e=this;e.getMock=function(a){return c(a)},e.createMock=function(b,c){return a.createMock({raml:b.contents,json:c}).then(function(a){return d(b,a)})},e.updateMock=function(b,e){return c(b).then(function(c){return c&&a.updateMock(angular.extend(c,{raml:b.contents,json:e}))}).then(function(a){return d(b,a)})},e.deleteMock=function(b){return c(b).then(function(b){return b&&a.deleteMock(b)}).then(function(){return d(b,null)})}}])}(),function(){"use strict";angular.module("ramlEditorApp").service("importModal",["$modal",function(a){var b=this;return b.open=function(){return a.open({templateUrl:"views/import-modal.html",controller:"ImportController"}).result},b}]).controller("ImportController",["$scope","$modalInstance","swaggerToRAML","$q","importService","ramlRepository","eventEmitter",function(a,b,c,d,e,f,g){function h(c){return a.fileSupported?(a.importing=!0,e.mergeFile(a.rootDirectory,c.value).then(function(){return b.close(!0)})["catch"](function(a){g.publish("event:notification",{message:a.message,expires:!0,level:"error"})})["finally"](function(){a.importing=!1})):g.publish("event:notification",{message:"File upload not supported. Try upgrading your browser.",expires:!0,level:"error"})}function i(d){return a.importing=!0,c.convert(d.value).then(function(b){var c=k(d.value,"raml");return e.createFile(a.rootDirectory,c,b)}).then(function(){return b.close(!0)})["catch"](function(a){g.publish("event:notification",{message:"Failed to import Swagger: "+a.message,expires:!0,level:"error"})})["finally"](function(){a.importing=!1})}function j(d){return a.importing=!0,c.zip(d.value).then(function(b){var c=k(d.value.name,"raml");return e.createFile(a.rootDirectory,c,b)}).then(function(){return b.close(!0)})["catch"](function(a){g.publish("event:notification",{message:"Failed to parse Swagger: "+a.message,expires:!0,level:"error"})})["finally"](function(){a.importing=!1})}function k(a,b){var c=a.replace(/\/*$/,""),d=c.lastIndexOf("/");return d>-1&&(c=c.substr(d)),b&&(c=c.replace(/\.[^\.]*$/,"")+"."+b),c}a.importing=!1,a.rootDirectory=f.getByPath("/"),a.handleFileSelect=function(b){a.mode.value=b.files[0]},a.options=[{name:".zip file",type:"zip",callback:h},{name:"Swagger spec",type:"swagger",callback:i},{name:"Swagger .zip",type:"zip",callback:j}],a.mode=a.options[0],a.fileSupported=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),a["import"]=function(b){return b.$submitted=!0,a.submittedType=a.mode.type,b.$invalid||a.importing?void 0:a.mode.callback(a.mode)}}])}(),function(){"use strict";angular.module("ramlEditorApp").service("confirmModal",["$modal",function(a){var b=this;return b.open=function(b,c){return a.open({templateUrl:"views/confirm-modal.html",controller:"ConfirmController",resolve:{message:function(){return b},title:function(){return c}}}).result},b}]).controller("ConfirmController",["$modalInstance","$scope","message","title",function(a,b,c,d){b.data={message:c,title:d}}])}(),function(){"use strict";angular.module("ramlEditorApp").service("newNameModal",["$modal",function(a){var b=this;return b.open=function(b,c,d,e){return a.open({templateUrl:"views/new-name-modal.html",controller:"NewNameController",animation:!1,windowClass:"modal in",resolve:{message:function(){return b},title:function(){return e},defaultName:function(){return c},validations:function(){return d}}}).result},b}]).controller("NewNameController",["$modalInstance","$scope","message","defaultName","validations","title",function(a,b,c,d,e,f){b.input={newName:d,message:c,title:f},b.validationErrorMessage="",b.isValid=function(a){if(a)for(var c=0;c<e.length;c++)if(!e[c].validate(a))return b.validationErrorMessage=e[c].message,!1;return!0},b.submit=function(c){return c.$invalid?void(c.$submitted=!0):void a.close(b.input.newName)}}])}(),function(){"use strict";angular.module("ramlEditorApp").service("swaggerToRAML",["$window","$q","$http","importService",function(a,b,c,d){function e(a,b){return/^https?\:\/\//.test(a)?c.get(a,{transformResponse:!1}).then(function(a){return b(null,a.data)})["catch"](function(a){return b(new Error(a.data))}):b(new Error("Invalid file location: "+a))}function f(a){return function(b,c){if(b)return a.reject(b);try{return a.resolve(ramlObjectToRaml(c))}catch(d){return a.reject(d)}}}var g=this,h=a.RAML.Settings.proxy||"";return g.convert=function(a){var c=b.defer();return swaggerToRamlObject(h+a,e,f(c)),c.promise},g.zip=function(a){var c=b.defer();return d.isZip(a)?d.readFileAsText(a).then(function(a){var b=d.parseZip(a);swaggerToRamlObject.files(Object.keys(b),function(a,c){return b.hasOwnProperty(a)?c(null,b[a]):e(a,c)},f(c))}):c.reject(new Error("Invalid zip file")),c.promise},g}])}(),function(){"use strict";angular.module("ramlEditorApp").service("importService",["$q","$window","ramlRepository","importServiceConflictModal",function(a,b,c,d){function e(a,b,c){return n.readFileAsText(c).then(function(d){if(n.isZip(c)){var e=b.replace(/[\\\/][^\\\/]*$/,"");return n.createDirectory(a,e).then(function(a){return n.importZip(a,d)})}return n.createFile(a,b,d)})}function f(a,b){var c=Object.keys(b).filter(i).map(function(c){return function(){return n.createFile(a,c,b[c])}});return m(c)}function g(a){var b={};return Object.keys(a).forEach(function(c){/^__MACOSX\//.test(c)||/\/$/.test(c)||(b[c]=a[c].asText())}),b}function h(a){var b=Object.keys(a).map(function(a){return/[\\\/]/.test(a)?a.replace(/[\\\/][^\\\/]*$/,"").split(/[\\\/]/):[]}).reduce(function(a,b){for(var c=0;c<a.length;c++)if(b[c]!==a[c])return b.slice(0,c);return a}).join("/");if(!b)return angular.extend({},a);var c={};return Object.keys(a).forEach(function(d){var e=d.substr(b.length+1);e&&(c[e]=a[d])}),c}function i(a){return!/(?:^|[\/\\])\./.test(a)}function j(a){return!!c.getByPath(a)}function k(a,b,d){return c.createFile(a,b).then(function(a){return a.contents=d,a})}function l(a,b){var d,e=0,f=b.lastIndexOf("."),g=f>-1?b.substr(0,f):b,h=f>-1?b.substr(f):"";do{var i=g+"-"+ ++e+h;d=c.join(a.path,i)}while(j(d));return d}function m(b){return b.reduce(function(a,b){return a.then(b)},a.when())}var n=this;n.mergeFile=function(a,b){return n.isZip(b)?n.readFileAsText(b).then(function(b){return n.mergeZip(a,b)}):n.importFile(a,b)},n.mergeFileList=function(a,b){var c=Array.prototype.map.call(b,function(b){return function(){return n.mergeFile(a,b)}});return m(c)},n.importEntry=function(b,d){var f=a.defer();if(d.isFile)d.file(function(a){var g=c.join(b.path,d.fullPath);return e(b,g,a).then(f.resolve,f.reject)},f.reject);else{var g=d.createReader();g.readEntries(function(a){var c=a.filter(function(a){return i(a.name)}).map(function(a){return function(){return n.importEntry(b,a)}});return m(c).then(f.resolve,f.reject)})}return f.promise},n.importItem=function(a,b){return b.webkitGetAsEntry?n.importEntry(a,b.webkitGetAsEntry()):n.importFile(a,b.getAsFile())},n.importFile=function(a,b){return e(a,b.name,b)},n.importFromEvent=function(a,b){return b.dataTransfer.items?n.importItemList(a,b.dataTransfer.items):n.importFileList(a,b.dataTransfer.files)},n.importItemList=function(a,b){var c=Array.prototype.map.call(b,function(b){return function(){return n.importItem(a,b)}});return m(c)},n.importFileList=function(a,b){var c=Array.prototype.map.call(b,function(b){return function(){return n.importFile(a,b)}});return m(c)},n.createFile=function(a,b,e){return n.checkExistence(a,b).then(function(f){if(f!==d.SKIP_FILE){if(f===d.KEEP_FILE){var g=l(a,b);return k(a,g,e)}if(f===d.REPLACE_FILE){var h=c.join(a.path,b),i=c.getByPath(h);return void i.doc.setValue(e)}return k(a,b,e)}})},n.createDirectory=function(a,b){return c.createDirectory(a,b)},n.checkExistence=function(b,e){var f=c.join(b.path,e);return j(f)?d.open(f):a.when(null)},n.isZip=function(a){return/\.zip$/i.test(a.name)},n.readFileAsText=function(c){var d=a.defer(),e=new b.FileReader;return e.onload=function(){return d.resolve(e.result)},e.onerror=function(){return d.reject(e.error)},e.readAsArrayBuffer(c),d.promise},n.parseZip=function(a){var c=new b.JSZip(a);return g(c.files)},n.mergeZip=function(a,b){var c=h(n.parseZip(b));return f(a,c)},n.importZip=function(a,b){var c=n.parseZip(b);return f(a,c)}}])}(),function(){"use strict";var a=0,b=1,c=2;angular.module("ramlEditorApp").service("importServiceConflictModal",["$modal",function(d){var e=this;return e.open=function(a){return d.open({backdrop:"static",templateUrl:"views/import-service-conflict-modal.html",controller:"ImportServiceConflictModal",resolve:{path:function(){return a}}}).result},e.KEEP_FILE=b,e.SKIP_FILE=a,e.REPLACE_FILE=c,e}]).controller("ImportServiceConflictModal",["$scope","$modalInstance","path",function(d,e,f){d.path=f,d.skip=function(){e.close(a)},d.keep=function(){e.close(b)},d.replace=function(){e.close(c)}}])}(),function(){"use strict";angular.module("ramlEditorApp").factory("eventEmitter",function(){var a=this,b={};return a.publish=function(a,c){!b[a]||b[a].length<1||b[a].forEach(function(a){a(c||{})})},a.subscribe=function(a,c){b[a]||(b[a]=[]),b[a].push(c)},a})}(),function(){"use strict";angular.module("ramlEditorApp").factory("ramlEditorContext",["ramlParser","ramlParserFileReader",function(a,b){function c(a){return a.match(/^\s*/)[0].length}function d(a){for(var b=new RegExp("^/.*:$"),c=[],d=0;d<a.length;d++){var e=a[d];if(b.test(e))break;c.push(e)}return c.join("\n")}var e=this;return e.context={},e.read=function(f){var g,h,i=new RegExp("^/.*:$"),j=[f[0]],k=c(f[0]),l=new Array(f.length),m={},n={};f.forEach(function(a,b){g=a.trim(),a.startsWith("/")&&(h!==g&&m[h]&&(m[h].endAt=b),h=g,m[h]={raml:{raw:""},startAt:b},j=[a]),m[h]&&(m[h].raml.raw+=a+"\n"),i.test(g)&&(k===c(a)&&j.pop(),c(a)<k&&(j=j.slice(0,j.length-2)),0===j.filter(function(a){return a.trim()===g}).length&&j.push(g),k=c(a),l[b]=j.join(""),n[j.join("")]=null),l[b]=j.join("")}),e.context={scopes:l,metadata:m,resources:Object.keys(n),content:f,ramlHeader:{raw:d(f)}};var o={validate:!0,transform:!0,compose:!0,reader:b};a.load(e.context.ramlHeader.raw,null,o).then(function(a){e.context.ramlHeader.compiled=a}),Object.keys(m).map(function(b){var c=[e.context.ramlHeader.raw];a.load(c.concat(m[b].raml.raw).join("\n"),null,o).then(function(a){m[b].raml.compiled=a})})},e}])}(),function(){"use strict";angular.module("stringFilters",[]).filter("dasherize",function(){return function(a){return a?a.toLowerCase().trim().replace(/\s/g,"-"):""}})}(),function(){"use strict";angular.module("ramlEditorApp").constant("UPDATE_RESPONSIVENESS_INTERVAL",800).service("ramlParserFileReader",["$http","$q","ramlParser","ramlRepository","safeApplyWrapper",function(a,b,c,d,e){function f(a){return d.loadFile({path:a}).then(function(a){return a.contents})}function g(a){var c=d.getByPath(a);return c?c.loaded?b.when(c.contents):f(a):b.reject('File with path "'+a+'" does not exist')}function h(b){return a.get(b,{transformResponse:null}).then(function(a){return a.data},function(a){var c="cannot fetch "+b+", check that the server is up and that CORS is enabled";throw a.status&&(c+="(HTTP "+a.status+")"),c})}this.readFileAsync=e(null,function(a){return/^https?:\/\//.test(a)?h(a):g(a)})}]).controller("ramlEditorMain",["UPDATE_RESPONSIVENESS_INTERVAL","$scope","$rootScope","$timeout","$window","safeApply","safeApplyWrapper","debounce","throttle","ramlHint","ramlParser","ramlParserFileReader","ramlRepository","codeMirror","codeMirrorErrors","config","$prompt","$confirm","$modal","eventEmitter","ramlEditorContext","newFileService","$firebaseObject","hotkeys",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){function y(a){var b="";return a&&(b=a.path,a.dirty&&(b="* "+b)),b}function z(a){function b(a){return a.__isFold}function c(a){return a.find().from.line}function d(a,b){return Math.min(a,b)}var e={line:a};return E.findMarksAt(e).filter(b).map(c).reduce(d,F)}function A(a,b,c){return c===b?a:"Error on line "+(b+1)+": "+a}if(e.RAML.Settings.firebase){b.cliendId=Math.round(1e8*Math.random());var B="https://vivid-heat-7827.firebaseio.com/",C=new Firebase(B),D=w(C.child("contents"));D.$bindTo(b,"data"),b.$watch("data",function(){if(b.fileBrowser&&b.fileBrowser.selectedFile){var a=b.fileBrowser.selectedFile,c=a.name.split(".")[0][0];b.data&&b.data.contents&&null!=b.data.contents[c]&&b.data.contents[c]!==E.getValue()&&b.cliendId!==b.data.id&&E.setValue(b.data.contents[c])}})}b.activeMode="source",b.setMode=function(a){b.activeMode=a},b.isActive=function(a){return b.activeMode===a};var E,F,G;e.setTheme=function(a){p.set("theme",a),b.theme=c.theme=a,f(b)},t.subscribe("event:raml-editor-file-selected",function(a){G=a,t.publish("event:raml-parsed",{}),b.originalValue=a.contents;var c=a.contents;if(e.RAML.Settings.firebase){var d=a.name.replace(".")[0][0];b.data={},b.data.contents={id:b.cliendId},b.data.contents[d]=a.contents,c=b.data.contents[d]}b.currentFile=a,a.doc||(a.doc=new CodeMirror.Doc(c)),u.read(c.split("\n")),E.swapDoc(a.doc),E.focus(),n.configureEditor(E,a.extension),b.fileParsable=b.getIsFileParsable(a),b.sourceUpdated()}),b.$watch("fileBrowser.selectedFile.contents",function(a){if(null!=a&&a!==E.getValue()){var c=b.fileBrowser.selectedFile.name.replace(".")[0][0],d=a;e.RAML.Settings.firebase&&(d=b.data.contents[c]),G.doc=new CodeMirror.Doc(d),E.swapDoc(G.doc)}});var H=h(function(){t.publish("event:file-updated")},p.get("updateResponsivenessInterval",a));t.subscribe("event:raml-editor-file-created",H),t.subscribe("event:raml-editor-file-removed",H),t.subscribe("event:raml-editor-file-removed",function(a){G===a&&(G=void 0,E.swapDoc(new CodeMirror.Doc("")))}),b.canExportFiles=function(){return m.canExport()},b.supportsFolders=m.supportsFolders,b.sourceUpdated=function(){var a=E.getValue(),c=b.fileBrowser.selectedFile;if(c.contents=a,e.RAML.Settings.firebase){var d=c.name.replace(".")[0][0];b.data.contents={id:b.cliendId},b.data.contents[d]=a}b.clearErrorMarks(),b.fileParsable=b.getIsFileParsable(c),H()},b.loadRaml=function(a,b){return k.load(a,b,{validate:!0,transform:!0,compose:!0,reader:l})},b.clearErrorMarks=function(){o.clearAnnotations(),b.hasErrors=!1},t.subscribe("event:file-updated",function(){b.clearErrorMarks();var a=b.fileBrowser.selectedFile;return a&&b.fileParsable&&""!==a.contents.trim()?void b.loadRaml(a.contents,a.path).then(g(b,function(a){b.fileBrowser.selectedFile.raml=angular.copy(a),t.publish("event:raml-parsed",a)}),g(b,function(a){t.publish("event:raml-parser-error",a)})):(b.currentError=void 0,void(F=void 0))}),t.subscribe("event:raml-parsed",g(b,function(a){b.title=a.title,b.version=a.version,b.currentError=void 0,F=void 0})),t.subscribe("event:raml-parser-error",g(b,function(a){var c=a.problem_mark,d=0,e=0,f=a.message;F=d,b.currentError=a,c&&(F=c.line,d=z(F),e=c.column),o.displayAnnotations([{line:d+1,column:e+1,message:A(f,F,d)}])})),t.subscribe("event:editor:extract-to",g(b,function(a){var c,d="Extract to",e=a.getSelection(),f=e.split(":");return f.length>1?(f=f[0],c=(f+".raml").replace(/\s/g,""),e=e.replace(f+":",""),v.prompt(b.homeDirectory,"Extract to",d,e,c,!0).then(function(b){c&&a.replaceSelection(f+": !include "+b.path),t.publish("event:notification:save-all",{notify:!1})})):void 0})),b.openHelp=function(){s.open({templateUrl:"views/help.html"})},b.getIsFileParsable=function(a,c){return"raml"!==a.extension?!1:(c=arguments.length>1?c:a.contents,0!==c.search(/^\s*#%RAML( \d*\.\d*)?\s*(\n|$)/)?!1:((b.fileBrowser||{}).rootFile||a)!==a?!1:!0)},b.getIsMockingServiceVisible=function(){return b.mockingServiceDisabled||!b.fileParsable?!1:!0},b.getIsShelfVisible=function(){return b.fileParsable?!0:!1},b.getIsConsoleVisible=function(){return b.tryIt&&b.tryIt.enabled&&b.tryIt.selectedMethod?!0:!1},b.toggleShelf=function(){b.shelf.collapsed=!b.shelf.collapsed,p.set("shelf.collapsed",b.shelf.collapsed)},b.getSelectedFileAbsolutePath=function(){return y(G)},t.subscribe("event:toggle-theme",function(){e.setTheme("dark"===b.theme?"light":"dark")}),b.mainClick=function(a){-1===a.target.parentElement.className.indexOf("omnisearch")&&b.omnisearch.close()},b.openOmnisearch=function(a){a.preventDefault(),b.omnisearch.open()},b.toggleCheatSheet=function(){x.toggleCheatSheet()},function(){b.currentError=void 0,b.theme=c.theme=p.get("theme","dark"),b.shelf={},b.shelf.collapsed=JSON.parse(p.get("shelf.collapsed","false")),b.editor=E=n.initEditor(),E.on("fold",function(a,c,d){c.line<=F&&F<=d.line&&o.displayAnnotations([{line:c.line+1,message:A(b.currentError.message,F,c.line)}])}),E.on("unfold",function(){var a=z(F),c=A(b.currentError.message,F,a);o.displayAnnotations([{line:a+1,message:c}])}),E.on("change",function(a){g(b,function(){var c=b.fileBrowser.selectedFile,d=b.originalValue,e=a.getValue();c.dirty=d!==e,b.workingFiles[c.name]=c,b.sourceUpdated()})()}),t.subscribe("event:editor:new:file",g(b,function(a){var c=a.file;b.workingFiles[c.name]=c})),e.alreadyNotifiedExit=!1,e.editorFilesystemIsDirty=function(){var a=!1;return b.homeDirectory.forEachChildDo(function(b){a=b.dirty||a}),a},e.onbeforeunload=function(){return!e.alreadyNotifiedExit&&e.editorFilesystemIsDirty()?"WARNING: You have unsaved changes. Those will be lost if you leave this page.":void 0}}()}])}(),function(){"use strict";angular.module("ramlEditorApp").factory("applySuggestion",["ramlSnippets","generateTabs","getNode",function(a,b,c){return function(d,e){var f=a.getSnippet(e),g=c(d),h="-"===g.line.trim(),i=g.lineIndent.tabCount,j=h?" ":"",k=h?"":b(i);if(e.isList&&!h){var l=g.selfOrPrevious(function(a){return a.isArrayStarter});!l||g.lineIndent.tabCount===l.lineIndent.tabCount&&g.lineNumber!==l.lineNumber||e.metadata&&e.metadata.isText?j="- ":g.isArrayStarter&&(k=b(i+1))}for(var m=f.map(function(a,b){return k+(0===b?j:"")+a}).join("\n");;){if(g.isEmpty)break;var n=c(d,g.lineNumber+1);if(!n||n.lineIndent.tabCount<=i)break;g=n}var o={line:g.lineNumber,ch:g.line.replace(/\s+$/,"").length},p={line:o.line,ch:g.line.length},q=!g.isEmpty&&!h;q&&(m="\n"+m),d.replaceRange(m,o,p),d.setCursor({line:o.line+f.length-(q?0:1)}),d.focus()}}]).value("suggestionKeyToTitleMapping",{"<resource>":"New Resource"}).factory("updateSuggestions",["ramlHint","suggestionKeyToTitleMapping",function(a,b){return function(c){var d=a.getSuggestions(c),e={},f={sections:[]};return d.forEach(function(a){a.title=b[a.key]||a.key,e[a.metadata.category]=e[a.metadata.category]||{name:a.metadata.category,items:[]},e[a.metadata.category].items.push(a),a.isList=d.isList}),Object.keys(e).forEach(function(a){f.sections.push(e[a])}),f.path=d.path,f}}]).controller("ramlEditorShelf",["$scope","safeApplyWrapper","applySuggestion","updateSuggestions",function(a,b,c,d){var e=a.editor;a.cursorMoved=b(null,function(){a.model=d(e)}),a.orderSections=function(a){var b=["root","docs","methods","parameters","responses","security","resources","traits and types"].indexOf(a.name.toLowerCase());return-1===b?b.length:b},a.itemClick=function(a){c(e,a)},e.on("cursorActivity",a.cursorMoved)}])}(),function(){"use strict";angular.module("ramlEditorApp").constant("NOTIFICATION_TIMEOUT",3e3).controller("notifications",["NOTIFICATION_TIMEOUT","$scope","$timeout","eventEmitter",function(a,b,c,d){function e(){var d;f.length&&(d=f.splice(0,1)[0],b.message=d.message,b.expires=d.expires,b.level=d.level||"info",b.shouldDisplayNotifications=!0,d.expires&&c(function(){b.shouldDisplayNotifications=!1,e()},a))}var f=[];b.shouldDisplayNotifications=!1,d.subscribe("event:notification",function(a){f.push(JSON.parse(JSON.stringify(a))),e()}),b.hideNotifications=function(){b.shouldDisplayNotifications=!1,e()}}])}(),function(){"use strict";angular.module("ramlEditorApp").controller("mockingServiceController",["$scope","mockingService","getNode",function(a,b,c){function d(){function b(b,c,d){a.editor.setLine(b,(d||"")+a.editor.getLine(b)+"\n"+c)}for(var d="baseUri: "+a.mock.baseUri,e=c(a.editor,0);e;){if("baseUri"===e.getKey())return void b(e.lineNumber,d,"#");e=e.getNextSibling()}for(var f=0;a.editor.getLine(f);f++)if("---"===a.editor.getLine(f).trim())return void b(f,d);b(0,d)}function e(){var b="baseUri: "+a.mock.baseUri,c=void 0,d=void 0;for(c=0;c<a.editor.lineCount();c++)if(d=a.editor.getLine(c).trim(),d===b){a.editor.removeLine(c);break}for(c=Math.min(c,a.editor.lineCount()-1);c>=0;c--)if(d=a.editor.getLine(c).trim(),0===d.indexOf("#")&&0===d.slice(1).trim().indexOf("baseUri: ")){a.editor.setLine(c,d.slice(1).trim());break}}function f(b){return a.loading=!0,b["finally"](function(){a.loading=!1})}function g(b){a.mock=b,a.enabled=!!b}function h(){f(b.getMock(a.fileBrowser.selectedFile).then(g))}function i(){f(b.createMock(a.fileBrowser.selectedFile,a.fileBrowser.selectedFile.raml).then(g).then(d))}function j(){b.updateMock(a.fileBrowser.selectedFile,a.fileBrowser.selectedFile.raml).then(g)}function k(){f(b.deleteMock(a.fileBrowser.selectedFile).then(function(){e()}).then(g))}a.toggleMockingService=function(){return a.fileBrowser.selectedFile?a.enabled?void k():void i():void 0},a.$watch("fileBrowser.selectedFile",function(a){a?h():g()}),a.$watch("fileBrowser.selectedFile.raml",function(){a.enabled&&j()})}])}(),function(){"use strict";angular.module("splitter",[]).directive("ngSplitter",["$window","config",function(a,b){function c(a){return a.attr("ng-splitter-collapse-target")}function d(a){return a.attr("ng-splitter-min-width")}function e(a){return a[c(a)]()}function f(a){return a[{next:"prev",prev:"next"}[c(a)]]()}function g(a,b){var c=d(a);return("undefined"==typeof c||b>=c)&&e(a).css("min-width",Math.max(0,b)+"px"),Math.max(0,b)}function h(a,b,d){var h=e(a),j=i(h,b),k=f(a),l=i(k,b),m={next:1,prev:-1}[c(a)];return 0>l+d*m&&(d=l*m*-1),d&&(j=g(a,j-d*m)),j}function i(a,b){var c="offset"+b[0].toUpperCase()+b.slice(1);return a[0][c]}function j(a,c){return b.get("splitterSize_"+a.attr("id"))||k(a,c)}function k(a,c){var d=i(e(a),c);return b.set("splitterSize_"+a.attr("id"),d),d}function l(a){return"true"===b.get("splitterCollapsed_"+a.attr("id"))}function m(a,c){b.set("splitterCollapsed_"+a.attr("id"),c)}function n(a,b){b=arguments.length>1?b:!l(a),a.toggleClass("collapsed",b),e(a).toggleClass("hide-display",b),m(a,b)}return angular.element.prototype.prev||(angular.element.prototype.prev=function(){var a;if(this.length)for(a=this[0].previousSibling;null!==a&&1!==a.nodeType;)a=a.previousSibling;return angular.isDefined(a)?angular.element(a):this}),{restrict:"A",link:function(b,c,d){var e,f=!1,i=!0,m="vertical"===d.ngSplitter,o=m?"width":"height",p=m?"clientX":"clientY",q=j(c,o),r=l(c),s=c.parent();g(c,q),n(c,r),c.on("mousedown",function(a){0===a.button&&(e=a[p],q=j(c,o),r=l(c),f=!0,s.addClass("noselect"))}),angular.element(a).on("mousemove",function(a){if(f){i=!0;var b=0===h(c,o,a[p]-e);b!==r&&n(c,b),e=a[p],r=b}}).on("mouseup",function(){f&&(r?(n(c,!0),g(c,q)):k(c,o),f=!1,s.removeClass("noselect"))}),c.children(".split").on("mousedown",function(){i=!1}),c.children(".split").on("mouseup",function(){i||(n(c),i=!0,f=!1)})}}}])}(),function(){"use strict";angular.module("validate",[]).directive("ngValidate",["$parse",function(a){return{require:"ngModel",link:function(b,c,d,e){var f=a(d.ngValidate);b.$watch(d.ngModel,function(a){var c=f(b,{$value:a});e.$setValidity("validate",c)})}}}])}(),function(){"use strict";angular.module("autoFocus",[]).directive("ngAutoFocus",["$timeout",function(a){return{link:function(b,c,d){b.$watch(d.ngAutoFocus,function(b){b&&a(function(){c[0].focus()})})}}}])}(),function(){"use strict";angular.module("rightClick",[]).directive("ngRightClick",["$parse",function(a){return function(b,c,d){var e=a(d.ngRightClick);c.on("contextmenu",function(a){b.$apply(function(){a.preventDefault(),e(b,{$event:a})})})}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditor",function(){return{restrict:"E",scope:{mockingServiceDisabled:"="},templateUrl:"views/raml-editor-main.tmpl.html",controller:"ramlEditorMain"}})}(),function(){"use strict";angular.module("dragAndDrop",[]).directive("ngDragEnter",["$parse",function(a){return function(b,c,d){var e=a(d.ngDragEnter),f=0;c.on("dragleave",function(){f--}),c.on("dragenter",function(a){f++,1===f&&b.$apply(function(){a.preventDefault(),e(b,{$event:a})})})}}]).directive("ngDragLeave",["$parse",function(a){return function(b,c,d){var e=a(d.ngDragLeave),f=0;c.on("dragenter",function(){f++}),c.on("dragleave",function(a){f--,0===f&&b.$apply(function(){a.preventDefault(),e(b,{$event:a})})})}}]).directive("ngDrop",["$parse",function(a){return function(b,c,d){var e=a(d.ngDrop);c.on("dragover",function(a){a.preventDefault()}),c.on("drop",function(a){b.$apply(function(){a.preventDefault(),a.stopPropagation(),e(b,{$event:a})})})}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorContextMenu",["$injector","$window","confirmModal","newNameModal","ramlRepository","newFileService","newFolderService","scroll",function(a,b,c,d,e,f,g,h){function i(a){var b={label:"Save",execute:function(){return e.saveFile(a)}},h={label:"New File",execute:function(){return f.prompt(a)}},i={label:"New Folder",execute:function(){return g.prompt(a)}},j={label:"Rename",execute:function(){var b=e.getParent(a),c=a.isDirectory?"Enter a new name for this folder:":"Enter a new name for this file:",f=a.isDirectory?"Rename a folder":"Rename a file",g=[{message:"This name is already taken.",validate:function(a){var c=e.join(b.path,a);return!e.getByPath(c)}}];return d.open(c,a.name,g,f).then(function(b){e.rename(a,b)})}},k={label:"Delete",execute:function(){var b,d;return a.isDirectory?(b='Are you sure you want to delete "'+a.name+'" and all its contents?',d="Remove folder"):(b='Are you sure you want to delete "'+a.name+'"?',d="Remove file"),c.open(b,d).then(function(){return e.remove(a)})}};return a.isDirectory?[h,i,j,k]:[b,j,k]}function j(a){var b=a.getBoundingClientRect();return!(b.top>=0&&b.left>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth))}return{restrict:"E",templateUrl:"views/raml-editor-context-menu.tmpl.html",link:function(a,c){function d(a,b){var c=b.pageY,d=b.pageX,e=angular.element(a[0].children[0]);e.css("top",c+"px"),e.css("left",d+"px"),setTimeout(function(){j(e[0])&&e.css("top",c-e[0].offsetHeight+"px")},0)}function e(){h.enable(),a.$apply(function(){delete g.target,a.opened=!1,b.removeEventListener("click",e),b.removeEventListener("keydown",f)})}function f(a){27===a.which&&(a.preventDefault(),e())}var g={open:function(g,j){h.disable(),this.target=j,a.actions=i(j),g.stopPropagation(),d(c,g),b.addEventListener("click",e),b.addEventListener("keydown",f),a.opened=!0}};a.registerContextMenu(g)},scope:!0}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorFileBrowser",["$q","$window","$timeout","config","ramlRepository","newNameModal","importService","eventEmitter",function(a,b,c,d,e,f,g,h){function i(i){function j(a){if("/"!==a.path){var b=e.getParent(a);b.collapsed=!1,j(b)}}function k(a){83!==a.which||!a.metaKey&&!a.ctrlKey||a.shiftKey||a.altKey||(a.preventDefault(),i.$apply(function(){n.saveFile(n.selectedFile)}))}function l(){var a="Untitled-1.raml",b="File system has no files, please input a name for the new file:",c=[],d="Add a new file";f.open(b,a,c,d).then(function(a){return e.generateFile(i.homeDirectory,a)},function(){return e.generateFile(i.homeDirectory,a)})}function m(a){for(var b=[a],c=0;c<b.length;){for(var d=b[c],e=d.children,f=void 0,g=0;g<e.length;g++){if(f=e[g],"file"===f.type&&f.root)return f;"directory"===f.type&&b.push(f)}c+=1}}var n=this,o=void 0;h.subscribe("event:editor:include",function(a){var b=a.path;i.homeDirectory.forEachChildDo(function(a){return a.isDirectory||-1===a.path.indexOf(b)?void 0:void n.selectFile(a)})}),i.toggleFolderCollapse=function(a){a.collapsed=!a.collapsed},i.fileTreeOptions=function(){var a=!1;return{accept:function(b,c,d){var f,g=b.$modelValue,h=0>d?i.homeDirectory:c.$modelValue[d];h.isDirectory||(h=c.$nodeScope?c.$nodeScope.$modelValue:i.homeDirectory);var j=e.getParent(g).path===h.path||h.path.slice(0,g.path.length)===g.path;return a=h.children.filter(function(a){return a.name===g.name}).length>0,f=!a&&!j,f?n.cursorState="ok":n.cursorState="no",f},dropped:function(a){var b=a.source.nodeScope.$modelValue,c=a.dest.nodesScope.$nodeScope?a.dest.nodesScope.$nodeScope.$modelValue:i.homeDirectory;e.move(b,c).then(function(){return n.select(b)})},dragStop:function(b){n.cursorState="",!b.canceled&&a&&h.publish("event:notification",{message:"Failed: duplicate file name found in the destination folder.",expires:!0,level:"error"})}}}(),i.workingFiles={},n.close=function(a){delete i.workingFiles[a.name]},n.isEmpty=function(a){return 0===Object.keys(a).length},n.dblClick=function(a){a.isDirectory||(i.workingFiles[a.name]=a)},n.select=function(a){return a.isDirectory?n.selectDirectory(a):n.selectFile(a)},n.selectFile=function(b){if(n.selectedFile&&n.selectedFile.$$hashKey===b.$$hashKey)return void(n.currentTarget=b);var c=b.loaded||!b.persisted,d=c?a.when(b):e.loadFile(b);d.then(function(a){n.selectedFile=n.currentTarget=a,h.publish("event:raml-editor-file-selected",a)})},n.selectDirectory=function(a){h.publish("event:raml-editor-directory-selected",a)},n.saveFile=function(a){e.saveFile(a)},n.dropFile=function(a){return g.importFromEvent(a,event).then(function(){a.collapsed=!1})["catch"](function(a){h.publish("event:notification",{message:a.message,
expires:!0,level:"error"})})},n.showContextMenu=function(a,b){o.open(a,b)},n.contextMenuOpenedFor=function(a){return o&&o.target===a},b.addEventListener("keydown",k),i.fileBrowser=n,i.registerContextMenu=function(a){o=a},h.subscribe("event:raml-editor-file-generated",function(a){n.selectFile(a)}),h.subscribe("event:raml-editor-directory-created",function(a){n.selectDirectory(a)}),h.subscribe("event:raml-editor-file-selected",function(a){j(a)}),h.subscribe("event:raml-editor-directory-selected",function(a){j(a)}),h.subscribe("event:raml-editor-filetree-modified",function(a){var b=e.getParent(a);b.sortChildren()}),h.subscribe("event:raml-editor-file-removed",function(a){c(function(){var b=i.homeDirectory.getFiles();0===b.length?l():a===n.selectedFile&&n.selectFile(b[0])})}),h.subscribe("$destroy",function(){b.removeEventListener("keydown",k)}),i.$watch("fileBrowser.selectedFile.path",function(a,b){a!==b&&d.set("currentFile",JSON.stringify({path:a,name:a.slice(a.lastIndexOf("/")+1)}))}),e.loadDirectory().then(function(a){i.homeDirectory=a,n.rootFile=m(a);var b=[];if(i.homeDirectory.forEachChildDo(function(a){a.isDirectory||b.push(a)}),!b.length)return void l();var c=JSON.parse(d.get("currentFile","{}")),f=e.getByPath(c.path)||n.rootFile||b[0];n.selectFile(f)})}return{restrict:"E",templateUrl:"views/raml-editor-file-browser.tmpl.html",controller:i}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorSaveFileButton",["ramlRepository","$window","$timeout","$q","eventEmitter",function(a,b,c,d,e){return{restrict:"E",template:['<span role="save-button" ng-click="saveFile()"><i class="fa fa-save"></i>&nbsp;Save</span>','<span class="menu-item-toggle" ng-click="openContextMenu($event)">','  <i class="fa fa-caret-down"></i>',"</span>",'<ul role="context-menu" class="menu-item-context" ng-show="contextMenuOpen">','  <li role="context-menu-item" ng-click="saveAllFiles()">Save All</li>',"</ul>"].join("\n"),link:function(f){function g(){var b=[];return f.homeDirectory.forEachChildDo(function(c){return c.isDirectory?void 0:c.dirty?b.push(a.saveFile(c)):void 0}),b}f.contextMenuOpen=!1,f.openContextMenu=function(){c(function(){b.addEventListener("click",function a(){f.$apply(function(){f.contextMenuOpen=!1}),b.removeEventListener("click",a)})}),f.contextMenuOpen=!0},f.saveFile=function(){var b=f.fileBrowser.selectedFile;return a.saveFile(b)},e.subscribe("event:notification:save-all",function(a){a.notify?f.saveAllFiles():g()}),f.saveAllFiles=function(){return d.all(g())}}}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorNewFolderButton",["newFolderService",function(a){return{restrict:"E",template:'<span role="new-button" ng-click="newFolder()"><i class="fa fa-folder-open"></i>&nbsp;New Folder</span>',link:function(b){b.newFolder=function(){return a.prompt(b.homeDirectory)}}}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorNewFileButton",["newFileService",function(a){return{restrict:"E",template:'<span role="new-button" ng-click="newFile()"><i class="fa fa-plus"></i>&nbsp;New File</span>',link:function(b){b.newFile=function(){return a.prompt(b.homeDirectory)}}}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorExportFilesButton",["ramlRepository",function(a){return{restrict:"E",template:'<span role="export-button" ng-click="exportFiles()"><i class="fa fa-download"></i>&nbsp;Export files</span>',link:function(b){b.exportFiles=function(){a.exportFiles()}}}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorImportButton",["$injector","importModal",function(a,b){return{restrict:"E",template:'<span role="new-button" ng-click="importFile()"><i class="fa fa-cloud-download"></i> Import</span>',link:function(a){a.importFile=function(){return b.open()}}}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorOmnisearch",["eventEmitter","hotkeys","ramlEditorContext",function(a,b,c){return{restrict:"E",templateUrl:"views/raml-editor-omnisearch.tmpl.html",controller:["$scope","$element","$timeout","$sce",function(b,d,e,f){function g(){n.mode="resource";var a=c.context.resources,b=n.searchText.replace("@","").replace(/:/g,"").split(" ").join("/");a.forEach(function(a){var c=a.replace(/:/g,"");-1!==c.indexOf(b)&&n.searchResults.push({name:f.trustAsHtml(c.replace(b,'<strong style="color: #0090f1;">'+b+"</strong>")),text:a})}),p=0,o=n.searchResults.length,n.selected=n.searchResults[0],m(!1)}function h(){n.mode="line";var b=n.searchText.match(/(\d+)/g);n.searchLine=parseInt(b,10),a.publish("event:goToLine",{line:n.searchLine})}function i(){n.mode="file",b.homeDirectory.forEachChildDo(function(a){var b=n.searchText;if(!a.isDirectory){var c=a.name.replace(a.extension,"");b.length>0&&-1!==c.indexOf(b)&&n.searchResults.push({name:f.trustAsHtml(a.name.replace(b,'<strong style="color: #0090f1;">'+b+"</strong>")),text:a})}}),n.selected=n.searchResults[0],o=n.searchResults.length}function j(){n.mode="text";var b=c.context.content,d=n.searchText.replace("#","");b.forEach(function(a,b){d&&d.length>0&&-1!==a.toLowerCase().indexOf(d.toLowerCase())&&n.searchResults.push({name:f.trustAsHtml(a.replace(d,'<strong style="color: #0090f1;">'+d+"</strong>")),text:a,line:b+1})}),p=-1,o=n.searchResults.length,n.selected=n.searchResults[0],n.selected&&a.publish("event:goToLine",{line:n.selected.line,focus:!1})}function k(){n.showHelp=!0}function l(a){return new q(a.startsWith(":")?h:a.startsWith("@")?g:a.startsWith("#")?j:"?"===a?k:i)}function m(b){if(n.searchResults[p]){var c=n.searchResults[p].text.split("/");c=c.pop().replace(":",""),a.publish("event:goToResource",{scope:n.searchResults[p].text,resource:c,text:c,focus:b})}}var n=this,o=0,p=0;b.showOmnisearch=!1,n.open=function(){n.searchResults=null,n.searchText=null,n.searchLine=null,n.mode="file",n.selected=null,n.showHelp=!1,b.showOmnisearch=!0,p=0,e(function(){d.find("input").focus()})},n.close=function(){n.searchResults=null,n.searchText=null,n.searchLine=null,n.mode="file",n.selected=null,n.showHelp=!1,b.showOmnisearch=!1,p=0},a.subscribe("event:open:omnisearch",function(){n.open()}),a.subscribe("event:editor:click",function(){n.close()});var q=function(a){this.execute=a};n.search=function(){n.searchResults=[],p=0,n.showHelp=!1,l(n.searchText).execute()},n.showContent=function(b,c,d){if("resource"===n.mode){var e=b.text.split("/");e=e.pop().replace(":",""),a.publish("event:goToResource",{scope:b.text,resource:e,text:e,focus:"undefined"==typeof c?!0:c})}d||"file"!==n.mode||n.openFile(b.text),"text"===n.mode&&a.publish("event:goToLine",{line:b.line,focus:"undefined"==typeof c?!0:c})},n.openFile=function(a){a=a||n.selected.text,a||(b.showOmnisearch=!1),b.fileBrowser.selectFile(a),b.showOmnisearch=!1},n.isSelected=function(a){return a.line?n.selected?a.line===n.selected.line:!1:n.selected?a.text===n.selected.text:!1},n.keyUp=function(b){13===b&&("file"===n.mode&&n.openFile(null),"line"===n.mode&&a.publish("event:goToLine",{line:n.searchLine,focus:!0}),"resource"===n.mode&&m(!0),"text"===n.mode&&a.publish("event:goToLine",{line:n.selected.line,focus:!0}),n.close()),27===b&&n.close()},b.omnisearch=n}]}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorBottomBar",["safeApplyWrapper","eventEmitter",function(a,b){return{restrict:"E",templateUrl:"views/raml-editor-bottom-bar.tmpl.html",controller:["$scope",function(c){var d=this;d.cursor={line:1,column:1},b.subscribe("event:editor:context",a(c,function(a){var b=a.context,c=a.cursor,e=b.scopes[c.line];d.cursor={line:c.line+1,column:c.ch+1},d.resources=[],e.startsWith("/")&&(e.split("/").map(function(a){d.resources.push({text:a.replace(/:/g,""),value:a})}),d.resources=d.resources.slice(1,d.resources.length),d.active={scope:e,resource:d.resources[d.resources.length-1]})})),d.isActive=function(a){return a.text===d.active.resource.text},d.show=function(a,c){b.publish("event:goToResource",{scope:d.active.scope,resource:d.active.resource,text:a.value,index:c,focus:!0})},c.bottomBar=d}]}}])}(),function(){"use strict";String.prototype.titleize=function(){for(var a=this.split(" "),b=[],c=0;c<a.length;++c)b.push(a[c].charAt(0).toUpperCase()+a[c].toLowerCase().slice(1));return b.join(" ")},angular.module("ramlEditorApp").directive("ramlEditorTryIt",["eventEmitter","safeApplyWrapper",function(a,b){return{restrict:"E",templateUrl:"views/raml-editor-try-it.tmpl.html",controller:["$scope",function(c){function d(a){var b={anonymous:{type:"Anonymous",name:"Anonymous"}};return a.securitySchemes&&a.securitySchemes.forEach(function(a){var c=Object.keys(a)[0],d=a[c].type;b[c]=a[c],b[c].name=a[c].type,d.startsWith("x-")&&(b[c].name=c.replace(/_/g," ").titleize())}),b}function e(a,b){if(a.uriParameters){var c=angular.copy(a.uriParameters);for(var d in c)c.key=d;b.push(c)}}function f(a,b){var c,d=b.replace(/:/g,"").split("/"),f=[];if(d=d.slice(1,d.length),a.resources)for(var g=a.resources,h=0;h<g.length;h++)if(g[h].relativeUri==="/"+d.shift()){c=g[h];break}return e(c,f),d.forEach(function(a){var b=c.resources;if(c&&c.resources){for(var d=0;d<b.length;d++)if(b[d].relativeUri==="/"+a){c=b[d];break}e(c,f)}}),c=angular.copy(c),c.uriParameters=f,c}var g=this;a.subscribe("event:editor:context",b(c,function(a){var b,c,e=a.context,h=a.cursor,i=e.scopes,j=i[h.line];if(c="/"+j.split("/").slice(1,2),b=e.metadata[c]){var k=e.metadata[c].raml.compiled;k&&(g.securitySchemes=d(k),g.protocols=k.protocols,g.resource=f(k,j),g.enabled=!0,g.protocol=g.protocols[0],g.securityScheme="Anonymous",g.selectedMethod=g.resource.methods?g.resource.methods[0]:null)}else g.current=null,g.raml=null,g.enabled=!1,g.selectedMethod=null})),g.enabled=!1,g.selectedMethod=null,g.selectMethod=function(a){g.selectedMethod=a},c.tryIt=g}]}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorDesign",["ramlEditorContext","eventEmitter","safeApplyWrapper",function(a,b,c){return{restrict:"E",templateUrl:"views/raml-editor-design.tmpl.html",controller:["$scope",function(a){var d=this;b.subscribe("event:editor:context",c(a,function(a){d.resources=a.context.resources})),a.designer=d}]}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","$uiTreeHelper","$window","$document","$timeout","ramlRepository","config",function(a,b,c,d,e,f,g){return{require:["^uiTreeNodes","^uiTree","?uiTreeNode"],link:function(h,i,j,k){var l={};angular.extend(l,a),l.nodeClass&&i.addClass(l.nodeClass),h.init(k),h.collapsed=!!b.getNodeAttribute(h,"collapsed"),h.$watch(j.collapsed,function(a){"boolean"==typeof a&&(h.collapsed=a)}),h.$watch("collapsed",function(a){b.setNodeAttribute(h,"collapsed",a),j.$set("collapsed",a)});var m,n,o,p,q,r,s,t,u,v="ontouchstart"in window,w=!0,x=!1,y=null,z=!1,A=null,B=1e3,C=document.body,D=document.documentElement,E=function(a){if((v||2!==a.button&&3!==a.which)&&!(a.uiTreeDragging||a.originalEvent&&a.originalEvent.uiTreeDragging)){var e=angular.element(a.target),f=e.scope();if(f&&f.$type&&!("uiTreeNode"!==f.$type&&"uiTreeHandle"!==f.$type||"uiTreeNode"===f.$type&&f.$handleScope)){var j=e.prop("tagName").toLowerCase();if("input"!==j&&"textarea"!==j&&"button"!==j&&"select"!==j){for(;e&&e[0]&&e[0]!==i;){if(b.nodrag(e))return;e=e.parent()}if(h.beforeDrag(h)){a.uiTreeDragging=!0,a.originalEvent&&(a.originalEvent.uiTreeDragging=!0),a.preventDefault();var k=b.eventObj(a);n=!0,o=b.dragInfo(h);var q=h.$element.prop("tagName");s=angular.element(c.document.createElement(q)),l.hiddenClass&&s.addClass(l.hiddenClass),p=b.positionStarted(k,h.$element),r=angular.element(c.document.createElement(h.$parentNodesScope.$element.prop("tagName"))).addClass(h.$parentNodesScope.$element.attr("class")).addClass(l.dragClass).addClass("light"===g.get("theme")?"drag-light":""),r.css("z-index",9999),h.$element.after(s),r.append(h.$element.clone().html(h.$element.children()[0].innerHTML)),d.find("body").append(r),r.css({left:k.pageX-p.offsetX+"px",top:k.pageY-p.offsetY+"px"}),m={dragging:r},h.$element.addClass("drag-elm");var w=angular.element(r[0].lastChild).scope();w.collapsed=!0,angular.element(d).bind("touchend",K),angular.element(d).bind("touchcancel",K),angular.element(d).bind("touchmove",J),angular.element(d).bind("mouseup",K),angular.element(d).bind("mousemove",J),angular.element(d).bind("mouseleave",L),t=Math.max(C.scrollHeight,C.offsetHeight,D.clientHeight,D.scrollHeight,D.offsetHeight),u=Math.max(C.scrollWidth,C.offsetWidth,D.clientWidth,D.scrollWidth,D.offsetWidth),h.$treeScope.isDragging=!0}}}}},F=function(a){if(!x)return void(w||(x=!0,h.$apply(function(){h.$callbacks.dragStart(o.eventArgs(m,p))})));var d,f,g,i=b.eventObj(a);if(r){a.preventDefault(),c.getSelection?c.getSelection().removeAllRanges():c.document.selection&&c.document.selection.empty(),d=i.pageX-p.offsetX,f=i.pageY-p.offsetY,g={left:d,right:d+r[0].scrollWidth+5,top:f,bottom:f+r[0].scrollHeight},g.left<0?d=0:g.right>u&&(d=u-r[0].scrollWidth-5),g.top<0?f=0:g.bottom>t&&(f=t-r[0].scrollHeight),r.css({left:d+"px",top:f+"px"});var j=window.pageYOffset||c.document.documentElement.scrollTop,k=j+(window.innerHeight||c.document.clientHeight||c.document.clientHeight);if(k<i.pageY&&t>=k&&window.scrollBy(0,10),j>i.pageY&&window.scrollBy(0,-10),b.positionMoved(a,p,n),n)return void(n=!1);var l;angular.isFunction(r.hide)?r.hide():(l=r[0].style.display,r[0].style.display="none");var s=i.pageX-c.document.body.scrollLeft,v=i.pageY-(window.pageYOffset||c.document.documentElement.scrollTop);c.document.elementFromPoint(s,v);var y=angular.element(c.document.elementFromPoint(s,v));angular.isFunction(r.show)?r.show():r[0].style.display=l;var z=y.scope();if(!p.dirAx&&z!==h.prevHoverNode){var C=!1;if(h.prevHoverNode=z,!z)return;if("uiTree"===z.$type&&z.dragEnabled&&(C=z.isEmpty()),"uiTreeHandle"===z.$type&&(z=z.$nodeScope),"uiTreeDummyNode"===z.$type)return q=z.$parentNodesScope.accept(h,-1),q&&o.moveTo(z.$parentNodesScope,z.$parentNodesScope.childNodes(),H(h.$modelValue,z.$parentNodesScope.$modelValue)),$(".dragover").removeClass("dragover"),y.addClass("dragover"),void(A&&(e.cancel(A),A=null));if("uiTreeNode"!==z.$type&&!C)return;e.cancel(A),$(".dragover").removeClass("dragover"),z.$childNodesScope?(angular.element(z.$element.children()[0]).addClass("dragover"),z.collapsed&&(A=e(function(){z.collapsed=!1,h.nodeToExpand=null},B)),h.nodeToExpand=z):z.$parentNodeScope?(y.addClass("dragover"),angular.element(z.$parentNodeScope.$element.children()[0]).addClass("dragover"),h.nodeToExpand=z.$parentNodeScope):y.addClass("dragover"),C?z.$nodesScope.accept(h,0)&&o.moveTo(z.$nodesScope,z.$nodesScope.childNodes(),0):z.dragEnabled()&&(y=z.$element,q=z.$parentNodesScope.accept(h,z.index()),q&&(z.$childNodesScope?o.moveTo(z.$childNodesScope,z.childNodes(),H(h.$modelValue,z.$childNodesScope.$modelValue)):o.moveTo(z.$parentNodesScope,z.$parentNodesScope.childNodes(),H(h.$modelValue,z.$parentNodesScope.$modelValue))))}h.$apply(function(){h.$callbacks.dragMove(o.eventArgs(m,p))})}},G=function(a){a.preventDefault(),r&&(h.$treeScope.$apply(function(){h.$callbacks.beforeDrop(o.eventArgs(m,p))}),s.replaceWith(h.$element),r.remove(),r=null,h.$$apply?(o.apply(),h.$treeScope.$apply(function(){h.$callbacks.dropped(o.eventArgs(m,p))})):M(),h.$treeScope.$apply(function(){var a=o.eventArgs(m,p);a.canceled=z,h.$callbacks.dragStop(a)}),h.$$apply=!1,o=null),angular.element(d).unbind("touchend",K),angular.element(d).unbind("touchcancel",K),angular.element(d).unbind("touchmove",J),angular.element(d).unbind("mouseup",K),angular.element(d).unbind("mousemove",J),angular.element(c.document.body).unbind("mouseleave",L),$(".dragover").removeClass("dragover"),h.$element.removeClass("drag-elm"),h.$treeScope.isDragging=!1,h.prevHoverNode=null,z=!1},H=function(a,b){for(var c,d=0,e=b.length-1;e>=d;)c=Math.floor((d+e)/2),f.sortingFunction.call(null,b[c],a)>0?e=c-1:d=c+1;return d},I=function(a){h.dragEnabled()&&E(a)},J=function(a){F(a)},K=function(a){h.$$apply=q,G(a)},L=function(a){h.$$apply=!1,z=!0,G(a)},M=function(){e(function(){i.unbind(),i.bind("touchstart mousedown",function(a){w=!0,x=!1,y=e(function(){w=!1,I(a)},h.dragDelay)}),i.bind("touchend touchcancel mouseup",function(){e.cancel(y)})})};M(),angular.element(c.document.body).bind("keydown",function(a){27===a.keyCode&&L(a)})}}}]).directive("uiTreeDummyNode",["treeConfig",function(a){return{require:["^uiTreeNodes","^uiTree"],template:"<div class=\"file-item dummy\" ng-class=\"{'no-drop': fileBrowser.cursorState === 'no', copy: fileBrowser.cursorState === 'ok'}\"></div>",restrict:"E",replace:!0,controller:function(a,b){this.scope=a,a.$element=b,a.$parentNodeScope=null,a.$childNodesScope=null,a.$parentNodesScope=null,a.$treeScope=null,a.$$apply=!1,a.$type="uiTreeDummyNode",a.init=function(b){var c=b[0];a.$treeScope=b[1]?b[1].scope:null,a.$parentNodeScope=c.scope.$nodeScope,a.$parentNodesScope=c.scope}},link:function(b,c,d,e){var f={};angular.extend(f,a),f.nodeClass&&c.addClass(f.nodeClass),b.init(e)}}}])}(),angular.module("ramlEditorApp").run(["$templateCache",function(a){"use strict";a.put("views/confirm-modal.html",'<form name="form" novalidate>\n  <div class="modal-header">\n    <h3>{{data.title}}</h3>\n  </div>\n\n  <div class="modal-body">\n    <p>{{data.message}}</p>\n  </div>\n\n  <div class="modal-footer">\n    <button type="button" class="btn btn-default" ng-click="$dismiss()">Cancel</button>\n    <button type="button" class="btn btn-primary" ng-click="$close()" ng-auto-focus="true">OK</button>\n  </div>\n</form>\n'),a.put("views/help.html",'<div class="modal-header">\n    <h3><i class="fa fa-question-circle"></i> Help</h3>\n</div>\n\n<div class="modal-body">\n    <p>\n        The API Designer for RAML is built by MuleSoft, and is a web-based editor designed to help you author RAML specifications for your APIs.\n        <br />\n        <br />\n        RAML is a human-and-machine readable modeling language for REST APIs, backed by a workgroup of industry leaders.\n    </p>\n\n    <p>\n        To learn more about the RAML specification and other tools which support RAML, please visit <a href="http://www.raml.org" target="_blank">http://www.raml.org</a>.\n        <br />\n        <br />\n        For specific questions, or to get help from the community, head to the community forum at <a href="http://forums.raml.org" target="_blank">http://forums.raml.org</a>.\n    </p>\n</div>\n'),a.put("views/import-modal.html",'<form name="form" novalidate ng-submit="import(form)">\n  <div class="modal-header">\n    <h3>Import file (beta)</h3>\n  </div>\n\n  <div class="modal-body" ng-class="{\'has-error\': submittedType === mode.type && form.$invalid}">\n    <div style="text-align: center; font-size: 2em; margin-bottom: 1em;" ng-show="importing">\n      <i class="fa fa-spin fa-spinner"></i>\n    </div>\n\n    <div class="form-group" style="margin-bottom: 10px;">\n      <div style="float: left; width: 130px;">\n        <select class="form-control" ng-model="mode" ng-options="option.name for option in options"></select>\n      </div>\n\n      <div style="margin-left: 145px;" ng-switch="mode.type">\n        <input id="swagger" name="swagger" type="text" ng-model="mode.value" class="form-control" required ng-switch-when="swagger" placeholder="http://example.swagger.wordnik.com/api/api-docs">\n\n        <input id="zip" name="zip" type="file" ng-model="mode.value" class="form-control" required ng-switch-when="zip" onchange="angular.element(this).scope().handleFileSelect(this)">\n      </div>\n    </div>\n\n    <div ng-if="submittedType === \'swagger\'">\n      <p class="help-block" ng-show="form.swagger.$error.required">Please provide a URL.</p>\n    </div>\n\n    <div ng-if="submittedType === \'zip\'">\n      <p class="help-block" ng-show="form.zip.$error.required">Please select a .zip file to import.</p>\n    </div>\n  </div>\n\n  <div class="modal-footer" style="margin-top: 0;">\n    <button type="button" class="btn btn-default" ng-click="$dismiss()">Close</button>\n    <button type="submit" class="btn btn-primary">Import</button>\n  </div>\n</form>\n'),a.put("views/import-service-conflict-modal.html",'<form name="form" novalidate>\n  <div class="modal-header">\n    <h3>Path already exists</h3>\n  </div>\n\n  <div class="modal-body">\n    The path (<strong>{{path}}</strong>) already exists.\n  </div>\n\n  <div class="modal-footer">\n    <button type="button" class="btn btn-default pull-left" ng-click="skip()">Skip</button>\n    <button type="submit" class="btn btn-primary" ng-click="keep()">Keep Both</button>\n    <button type="submit" class="btn btn-primary" ng-click="replace()">Replace</button>\n  </div>\n</form>\n'),a.put("views/new-name-modal.html",'<form name="form" novalidate ng-submit="submit(form)">\n<!--   <div class="modal-header">\n    <h3>{{input.title}}</h3>\n  </div> -->\n\n  <div class="modal-body">\n    <!-- name -->\n    <div class="form-group" ng-class="{\'has-error\': form.$submitted && form.name.$invalid}">\n      <!-- <p>{{input.message}}</p> -->\n      <!-- label -->\n      <label for="name" class="control-label">{{input.message}}</label>\n\n      <!-- input -->\n      <input id="name" name="name" type="text"\n             ng-model="input.newName" class="form-control"\n             ng-validate="isValid($value)"\n             ng-maxlength="64" ng-auto-focus="true"\n             required\n             autofocus\n             autocomplete="off">\n\n      <!-- error -->\n      <p class="help-block" ng-show="form.$submitted && form.name.$error.required">Please provide a name.</p>\n      <p class="help-block" ng-show="form.$submitted && form.name.$error.maxlength">Name must be shorter than 64 characters.</p>\n      <p class="help-block" ng-show="form.$submitted && form.name.$error.validate">{{validationErrorMessage}}</p>\n    </div>\n  </div>\n\n<!--   <div class="modal-footer">\n    <button type="button" class="btn btn-default" ng-click="$dismiss()">Cancel</button>\n    <button type="submit" class="btn btn-primary">OK</button>\n  </div> -->\n</form>\n'),a.put("views/raml-editor-bottom-bar.tmpl.html",'<div>\n  <div class="cursor">\n    <span>Line</span> {{bottomBar.cursor.line}},\n    <span>Column</span> {{bottomBar.cursor.column}}\n  </div>\n  <div class="breadcrum">\n    <button ng-click="bottomBar.show(resource, $index)" ng-class="{active: bottomBar.isActive(resource)}" ng-repeat="resource in bottomBar.resources track by $index">{{resource.text}}</button>\n  </div>\n</div>\n'),a.put("views/raml-editor-context-menu.tmpl.html",'<ul role="context-menu" ng-show="opened">\n  <li role="context-menu-item" ng-repeat="action in actions" ng-click="action.execute()">{{ action.label }}</li>\n</ul>\n'),a.put("views/raml-editor-design.tmpl.html",'<div>\n  <div class="container">\n    <div class="title">\n      <span>Endpoint</span>\n    </div>\n    <div class="content">\n      content\n    </div>\n  </div>\n\n  <div class="container">\n    <div class="title">\n      <span>Resources</span>\n    </div>\n    <div class="content">\n      <div class="content">\n        <input class="search" type="text" ng-model="designer.resource" />\n      </div>\n      <ul>\n        <li ng-repeat="resource in designer.resources | filter: designer.resource">\n          <i class="fa icon fa-caret-right caret-icon ng-scope"></i> {{resource}}\n        </li>\n      </ul>\n    </div>\n  </div>\n\n  <div class="container">\n    <div class="title">\n      <span>Examples</span>\n    </div>\n    <div class="content">\n      content\n    </div>\n  </div>\n</div>\n'),a.put("views/raml-editor-file-browser.tmpl.html",'<raml-editor-context-menu></raml-editor-context-menu>\n\n<script type="text/ng-template" id="file-item.html">\n  <div ui-tree-handle class="file-item" ng-right-click="fileBrowser.showContextMenu($event, node)" ng-click="fileBrowser.select(node)"\n    ng-dblclick="fileBrowser.dblClick(node)" ng-class="{currentfile: fileBrowser.currentTarget.path === node.path && !isDragging,\n      geared: fileBrowser.contextMenuOpenedFor(node),\n      directory: node.isDirectory,\n      \'no-drop\': fileBrowser.cursorState === \'no\',\n      copy: fileBrowser.cursorState === \'ok\',\n      \'file-item2\': !node.isDirectory,\n      root: node.root\n    }"\n    ng-drop="node.isDirectory && fileBrowser.dropFile($event, node)">\n    <span class="file-name" ng-click="toggleFolderCollapse(node)">\n      <i class="fa icon fa-caret-right fa-fw" ng-if="node.isDirectory" ng-class="{\'fa-rotate-90\': !collapsed}"></i>{{node.name}}\n    </span>\n    <i class="fa fa-cog" ng-click="fileBrowser.showContextMenu($event, node)" ng-class="{hidden: isDragging}" data-nodrag></i>\n    <div class="background">&nbsp</div>\n  </div>\n\n  <ul ui-tree-nodes ng-if="node.isDirectory" ng-class="{hidden: collapsed}" ng-model="node.children">\n    <li ui-tree-node ng-repeat="node in node.children" ng-include="\'file-item.html\'" data-collapsed="node.collapsed">\n    </li>\n  </ul>\n</script>\n\n<div ui-tree="fileTreeOptions" ng-model="homeDirectory" class="file-list" data-drag-delay="300" data-empty-place-holder-enabled="false" ng-drop="fileBrowser.dropFile($event, homeDirectory)" ng-right-click="fileBrowser.showContextMenu($event, homeDirectory)">\n  <div class="section-title">\n    <!-- <span class="arrow">&#9660</span> -->\n    <i class="fa icon fa-caret-right caret-icon" ng-if="fileBrowser.isEmpty(workingFiles)"></i>\n    <i class="fa icon fa-caret-down caret-icon" ng-if="!fileBrowser.isEmpty(workingFiles)"></i>\n    Working Files\n    <i class="fa icon fa-save save-icon" ng-click="saveAllFiles()"></i>\n  </div>\n  <ul ng-if="!fileBrowser.isEmpty(workingFiles)" class="angular-ui-tree-nodes">\n    <li ng-repeat="(key, node) in workingFiles" class="angular-ui-tree-node angular-ui-working-node">\n      <div class="file-item" ng-click="fileBrowser.select(node)"\n        ng-class="{workingfile: fileBrowser.currentTarget.path === node.path, dirty: node.dirty}">\n        <span class="file-name" >\n          {{key}}\n        </span>\n        <div class="background">&nbsp</div>\n        <i class="fa fa-times close-icon" ng-click="fileBrowser.close(node)"></i>\n      </div>\n    </li>\n  </ul>\n  <div class="section-title">\n    <!-- <span class="arrow">&#9660</span> -->\n    <i class="fa icon fa-caret-down caret-icon"></i>\n    Project Explorer\n    <i class="fa icon fa-folder-open folder-icon" ng-click="newFolder()"></i>\n    <i class="fa icon fa-file file-icon" ng-click="newFile()"></i>\n    <!-- <i class="fa icon fa-filter file-icon"></i> -->\n  </div>\n  <div class="section-search" style="display: none;">\n    <i class="fa icon fa-search search-icon"></i>\n    <input type="text" />\n  </div>\n  <ul ui-tree-nodes ng-model="homeDirectory.children" id="tree-root">\n\n    <li ui-tree-node ng-repeat="node in homeDirectory.children" ng-include="\'file-item.html\'" data-collapsed="node.collapsed"\n     ng-drag-enter="node.collapsed = false"\n     ng-drag-leave="node.collapsed = true"></li>\n    <ui-tree-dummy-node class="bottom" ng-click="fileBrowser.select(homeDirectory)"></ui-tree-dummy-node>\n  </ul>\n</div>\n'),a.put("views/raml-editor-main.tmpl.html",'<div role="raml-editor" class="{{theme}}" ng-click="mainClick($event)" hotkey="{\'mod+p\': openOmnisearch, \'ctrl+h\': toggleCheatSheet}">\n  <div role="notifications" ng-controller="notifications" class="hidden" ng-class="{hidden: !shouldDisplayNotifications, error: level === \'error\'}">\n    {{message}}\n    <i class="fa" ng-class="{\'fa-check\': level === \'info\', \'fa-warning\': level === \'error\'}" ng-click="hideNotifications()"></i>\n  </div>\n\n  <header>\n    <h1>\n      <strong>API</strong> Designer\n    </h1>\n\n    <a role="logo" target="_blank" href="http://mulesoft.com"></a>\n  </header>\n\n  <ul class="menubar" style="height: 25px;">\n    <li class="menu-item menu-item-ll">\n      <raml-editor-new-file-button></raml-editor-new-file-button>\n    </li>\n    <li ng-show="supportsFolders" class="menu-item menu-item-ll">\n      <raml-editor-new-folder-button></raml-editor-new-folder-button>\n    </li>\n    <li class="menu-item menu-item-ll">\n      <raml-editor-save-file-button></raml-editor-save-file-button>\n    </li>\n    <li class="menu-item menu-item-ll">\n      <raml-editor-import-button></raml-editor-import-button>\n    </li>\n    <li ng-show="canExportFiles()" class="menu-item menu-item-ll">\n      <raml-editor-export-files-button></raml-editor-export-files-button>\n    </li>\n    <li class="spacer file-absolute-path"></li>\n   <!--  <li class="menu-item menu-item-fr menu-item-mocking-service" ng-show="getIsMockingServiceVisible()" ng-controller="mockingServiceController" ng-click="toggleMockingService()">\n      <div class="title">Mocking Service</div>\n      <div class="field-wrapper" ng-class="{loading: loading}">\n        <i class="fa fa-spin fa-spinner" ng-if="loading"></i>\n        <div class="field" ng-if="!loading">\n          <input type="checkbox" value="None" id="mockingServiceEnabled" ng-checked="enabled" ng-click="$event.preventDefault()" />\n          <label for="mockingServiceEnabled"></label>\n        </div>\n      </div>\n    </li> -->\n    <li class="menu-item menu-item-fr" ng-click="openHelp()">\n      <span><i class="fa fa-question-circle"></i> Help</span>\n    </li>\n  </ul>\n\n  <raml-editor-omnisearch role="omnisearch"></raml-editor-omnisearch>\n\n  <div role="flexColumns">\n    <raml-editor-file-browser role="browser"></raml-editor-file-browser>\n\n    <div id="browserAndEditor" ng-splitter="vertical" ng-splitter-collapse-target="prev" ng-splitter-min-width="200">\n    </div>\n\n\n    <div role="editor">\n      <div class="editor-title">{{getSelectedFileAbsolutePath()}}</div>\n      <div id="code" role="code" ng-show="isActive(\'source\')"></div>\n      <!-- <div role="design" ng-show="isActive(\'design\')"></div> -->\n      <!-- <div class="editor-bottom">\n        <button ng-click="setMode(\'design\')" ng-class="{\'active\': isActive(\'design\')}">Design</button>\n        <button ng-click="setMode(\'source\')" ng-class="{\'active\': isActive(\'source\')}">Source</button>\n      </div> -->\n\n      <!-- <div role="shelf" ng-show="getIsShelfVisible()" ng-class="{expanded: !shelf.collapsed}">\n        <div role="shelf-tab" ng-click="toggleShelf()">\n          <i class="fa fa-inbox fa-lg"></i><i class="fa" ng-class="shelf.collapsed ? \'fa-caret-up\' : \'fa-caret-down\'"></i>\n        </div>\n\n        <div role="shelf-container" ng-show="!shelf.collapsed" ng-include src="\'views/raml-editor-shelf.tmpl.html\'"></div>\n      </div> -->\n    </div>\n\n    <div id="consoleAndEditor" ng-splitter="vertical" ng-splitter-collapse-target="next" ng-splitter-min-width="300" ng-show="isActive(\'source\') && getIsConsoleVisible()">\n    </div>\n\n    <div role="preview-wrapper" ng-show="isActive(\'source\') && getIsConsoleVisible()">\n      <raml-editor-try-it role="try-it"></raml-editor-try-it>\n    </div>\n\n    <!-- <div role="preview-wrapper" ng-show="isActive(\'design\')">\n      <raml-editor-design role="editor-design"></raml-editor-design>\n    </div> -->\n  </div>\n  <raml-editor-bottom-bar role="bottom-bar"></raml-editor-bottom-bar>\n</div>\n'),a.put("views/raml-editor-omnisearch.tmpl.html",'<div ng-if="showOmnisearch" ng-keyup="omnisearch.keyUp($event.keyCode)" class="omnisearch">\n  <input type="text" placeholder="Type \'?\' to get help" autofocus\n    ng-change="omnisearch.search()"\n    ng-model="omnisearch.searchText"\n    />\n  <ul>\n    <li class="result" ng-repeat="result in omnisearch.searchResults" ng-mouseover="omnisearch.showContent(result, false, true)" ng-click="omnisearch.showContent(result)">\n      <span ng-bind-html="result.name"></span>\n    </li>\n    <li ng-if="omnisearch.showHelp"><span class="command">:</span> Go to line <span class="description">editor commands</span></li>\n    <li ng-if="omnisearch.showHelp"><span class="command">@</span> Go to resource</li>\n    <li ng-if="omnisearch.showHelp"><span class="command">#</span> Search text</li>\n  </ul>\n</div>\n'),
a.put("views/raml-editor-shelf.tmpl.html",'<ul role="sections" ng-controller="ramlEditorShelf">\n  <li role="section" ng-repeat="section in model.sections | orderBy:orderSections" class="{{section.name | dasherize}}">\n    {{section.name}}&nbsp;({{section.items.length}})\n    <ul role="items">\n      <li ng-repeat="item in section.items" ng-click="itemClick(item)"><i class="fa fa-reply"></i><span>{{item.title}}</span></li>\n    </ul>\n  </li>\n</ul>\n'),a.put("views/raml-editor-try-it.tmpl.html",'<div ng-if="tryIt.enabled">\n<!-- Protocols -->\n  <div class="container" ng-if="tryIt.protocols">\n    <div class="title">\n      <span>Protocols</span>\n    </div>\n    <div class="content">\n      <select class="control full-width" ng-model="tryIt.protocol">\n        <option ng-repeat="protocol in tryIt.protocols" value="{{protocol}}">{{protocol}}</option>\n      </select>\n    </div>\n  </div>\n<!-- Authorization -->\n  <div class="container">\n    <div class="title">\n      <span>Authentication</span>\n    </div>\n    <div class="content">\n      <label>Security Scheme</label>\n      <select class="control" ng-model="tryIt.securityScheme">\n        <option ng-repeat="(key, value) in tryIt.securitySchemes" value="{{value.type}}">{{value.name}}</option>\n      </select>\n\n      <div ng-switch on="tryIt.securityScheme">\n        <div ng-switch-when="Anonymous"></div>\n        <div ng-switch-when="Basic Authentication">\n          <label>Username</label>\n          <input class="control" type="text" id="username" value="">\n          <label>Password</label>\n          <input class="control" type="text" id="password" value="">\n        </div>\n        <div ng-switch-when="Digest Authentication"></div>\n        <div ng-switch-when="OAuth 1.0"></div>\n        <div ng-switch-when="OAuth 2.0">\n          <label>Authorization Grant</label>\n          <select class="control">\n            <option value="code">Authorization Code</option>\n            <option value="credentials">Client Credentials</option>\n          </select>\n\n          <label>Client ID</label>\n          <input class="control" type="text" id="clientId" value="">\n\n          <label>Client Secret</label>\n          <input class="control" type="text" id="clientSecret" value="">\n        </div>\n        <div ng-switch-default></div>\n      </div>\n    </div>\n  </div>\n<!-- URI Parameters -->\n  <div class="container" ng-if="tryIt.resource.uriParameters.length">\n    <div class="title">\n      <span>URI Parameters</span>\n    </div>\n    <div class="content">\n      <div ng-repeat="param in tryIt.resource.uriParameters">\n        <label>{{param.key}}</label>\n        <input class="control" type="text" id="{{param.key}}" value="">\n      </div>\n    </div>\n  </div>\n\n  <div class="container" ng-if="tryIt.resource.methods.length">\n    <div class="methods">\n      <button ng-repeat="method in tryIt.resource.methods" class="{{method.method}}" ng-click="tryIt.selectMethod(method)">{{method.method}}</button>\n    </div>\n    <div class="content method-container {{tryIt.selectedMethod.method}}">\n      <!-- Query Parameters -->\n        <div class="container" ng-if="tryIt.selectedMethod.queryParameters">\n          <div class="title">\n            <span>Query Parameters</span>\n          </div>\n          <div class="content">\n            <div ng-repeat="(key, value) in tryIt.selectedMethod.queryParameters">\n              <label>{{value.displayName}}</label>\n              <input class="control" type="text" id="{{key}}" value="">\n            </div>\n          </div>\n        </div>\n      <!-- Headers -->\n        <div class="container" ng-if="tryIt.selectedMethod.headers">\n          <div class="title">\n            <span>Headers</span>\n          </div>\n          <div class="content">\n            <div ng-repeat="(key, value) in tryIt.selectedMethod.headers">\n              <label>{{value.displayName}}</label>\n              <input class="control" type="text" id="{{key}}" value="">\n            </div>\n          </div>\n        </div>\n    </div>\n  </div>\n\n</div>\n')}]);